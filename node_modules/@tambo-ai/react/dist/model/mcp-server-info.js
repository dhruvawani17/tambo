"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MCPTransport = void 0;
exports.getMcpServerUniqueKey = getMcpServerUniqueKey;
/**
 * The transport protocol to use for MCP connections.
 */
var MCPTransport;
(function (MCPTransport) {
    MCPTransport["SSE"] = "sse";
    MCPTransport["HTTP"] = "http";
})(MCPTransport || (exports.MCPTransport = MCPTransport = {}));
/**
 * Creates a stable identifier for an MCP server based on its connection properties.
 * Two servers with the same URL, transport, and headers will have the same key.
 *
 * This is used by both the registry and MCP provider to deduplicate servers,
 * so it lives alongside the shared server metadata type.
 * @returns A stable string key identifying the server
 */
function getMcpServerUniqueKey(serverInfo) {
    const headerStr = serverInfo.customHeaders
        ? JSON.stringify(Object.entries(serverInfo.customHeaders)
            .map(([k, v]) => [k.toLowerCase(), v])
            .sort(([a], [b]) => a.localeCompare(b)))
        : "";
    return `${serverInfo.url}|${serverInfo.transport ?? MCPTransport.HTTP}|${headerStr}`;
}
//# sourceMappingURL=mcp-server-info.js.map
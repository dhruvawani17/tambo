{"version":3,"file":"tambo-interactables-additional-context.test.js","sourceRoot":"","sources":["../../src/providers/tambo-interactables-additional-context.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { render, waitFor } from \"@testing-library/react\";\nimport React from \"react\";\nimport { z } from \"zod/v4\";\nimport { withTamboInteractable } from \"../hoc/with-tambo-interactable\";\nimport {\n  TamboContextHelpersProvider,\n  useTamboContextHelpers,\n} from \"./tambo-context-helpers-provider\";\nimport {\n  TamboInteractableProvider,\n  useCurrentInteractablesSnapshot,\n} from \"./tambo-interactable-provider\";\nimport { TamboStubProvider } from \"./tambo-stubs\";\n\nfunction wrapperWithProviders(children: React.ReactNode) {\n  const thread = {\n    id: \"t-1\",\n    projectId: \"p-1\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    messages: [],\n    metadata: {},\n  } as any;\n\n  return (\n    <TamboStubProvider\n      thread={thread}\n      registerTool={() => {}}\n      registerTools={() => {}}\n      registerComponent={() => {}}\n      addToolAssociation={() => {}}\n    >\n      <TamboContextHelpersProvider>{children}</TamboContextHelpersProvider>\n    </TamboStubProvider>\n  );\n}\n\ndescribe(\"Interactables AdditionalContext (provider-based)\", () => {\n  test(\"registers default helper and returns payload with description and components\", async () => {\n    const Note: React.FC<{ title: string }> = ({ title }) => <div>{title}</div>;\n\n    const InteractableNote = withTamboInteractable(Note, {\n      componentName: \"Note\",\n      description: \"A note\",\n      propsSchema: z.object({ title: z.string() }),\n    });\n\n    let capturedContexts: any[] = [];\n    const TestComponent = () => {\n      const { getAdditionalContext } = useTamboContextHelpers();\n\n      React.useEffect(() => {\n        let mounted = true;\n        void getAdditionalContext().then((contexts) => {\n          if (mounted) {\n            capturedContexts = contexts;\n          }\n        });\n        return () => {\n          mounted = false;\n        };\n      }, [getAdditionalContext]);\n\n      return <div data-testid=\"ready\">ready</div>;\n    };\n\n    const { getByTestId } = render(\n      wrapperWithProviders(\n        <TamboInteractableProvider>\n          <InteractableNote title=\"hello\" />\n          <TestComponent />\n        </TamboInteractableProvider>,\n      ),\n    );\n\n    await waitFor(() => {\n      expect(getByTestId(\"ready\")).toBeInTheDocument();\n      const entry = capturedContexts.find(\n        (c: any) => c.name === \"interactables\",\n      );\n      expect(entry).toBeDefined();\n      expect(Array.isArray(entry?.context?.components)).toBe(true);\n      const comp = entry!.context.components[0];\n      expect(comp.componentName).toBe(\"Note\");\n      expect(comp.props).toEqual({ title: \"hello\" });\n    });\n  });\n\n  test(\"returns null when no interactable components are present\", async () => {\n    let capturedContexts: any[] = [];\n    const TestComponent = () => {\n      const { getAdditionalContext } = useTamboContextHelpers();\n\n      React.useEffect(() => {\n        let mounted = true;\n        void getAdditionalContext().then((contexts) => {\n          if (mounted) {\n            capturedContexts = contexts;\n          }\n        });\n        return () => {\n          mounted = false;\n        };\n      }, [getAdditionalContext]);\n\n      return <div data-testid=\"ready\">ready</div>;\n    };\n\n    const { getByTestId } = render(\n      wrapperWithProviders(\n        <TamboInteractableProvider>\n          <div>No interactables here</div>\n          <TestComponent />\n        </TamboInteractableProvider>,\n      ),\n    );\n\n    await waitFor(() => {\n      expect(getByTestId(\"ready\")).toBeInTheDocument();\n      const entry = capturedContexts.find(\n        (c: any) => c.name === \"interactables\",\n      );\n      expect(entry).toBeUndefined(); // Should be filtered out when helper returns null\n    });\n  });\n\n  test(\"context includes proper AI prompt with clear instructions\", async () => {\n    const Note: React.FC<{ title: string }> = ({ title }) => <div>{title}</div>;\n    const InteractableNote = withTamboInteractable(Note, {\n      componentName: \"Note\",\n      description: \"A simple note\",\n      propsSchema: z.object({ title: z.string() }),\n    });\n\n    let capturedContexts: any[] = [];\n    const TestComponent = () => {\n      const { getAdditionalContext } = useTamboContextHelpers();\n\n      React.useEffect(() => {\n        let mounted = true;\n        void getAdditionalContext().then((contexts) => {\n          if (mounted) {\n            capturedContexts = contexts;\n          }\n        });\n        return () => {\n          mounted = false;\n        };\n      }, [getAdditionalContext]);\n\n      return <div data-testid=\"ready\">ready</div>;\n    };\n\n    const { getByTestId } = render(\n      wrapperWithProviders(\n        <TamboInteractableProvider>\n          <InteractableNote title=\"test\" />\n          <TestComponent />\n        </TamboInteractableProvider>,\n      ),\n    );\n\n    await waitFor(() => {\n      expect(getByTestId(\"ready\")).toBeInTheDocument();\n      const entry = capturedContexts.find(\n        (c: any) => c.name === \"interactables\",\n      );\n      expect(entry).toBeDefined();\n      expect(Array.isArray(entry?.context?.components)).toBe(true);\n    });\n  });\n\n  test(\"includes component metadata in expected format\", async () => {\n    const Note: React.FC<{ title: string; color?: string }> = ({\n      title,\n      color = \"white\",\n    }) => <div className={`note-${color}`}>{title}</div>;\n\n    const InteractableNote = withTamboInteractable(Note, {\n      componentName: \"Note\",\n      description: \"A colorful note component\",\n      propsSchema: z.object({\n        title: z.string(),\n        color: z.string().optional(),\n      }),\n    });\n\n    let capturedContexts: any[] = [];\n    const TestComponent = () => {\n      const { getAdditionalContext } = useTamboContextHelpers();\n\n      React.useEffect(() => {\n        let mounted = true;\n        void getAdditionalContext().then((contexts) => {\n          if (mounted) {\n            capturedContexts = contexts;\n          }\n        });\n        return () => {\n          mounted = false;\n        };\n      }, [getAdditionalContext]);\n\n      return <div data-testid=\"ready\">ready</div>;\n    };\n\n    const { getByTestId } = render(\n      wrapperWithProviders(\n        <TamboInteractableProvider>\n          <InteractableNote title=\"test note\" color=\"blue\" />\n          <TestComponent />\n        </TamboInteractableProvider>,\n      ),\n    );\n\n    await waitFor(() => {\n      expect(getByTestId(\"ready\")).toBeInTheDocument();\n      const entry = capturedContexts.find(\n        (c: any) => c.name === \"interactables\",\n      );\n      const component = entry!.context.components[0];\n\n      expect(component).toMatchObject({\n        id: expect.any(String),\n        componentName: \"Note\",\n        description: \"A colorful note component\",\n        props: { title: \"test note\", color: \"blue\" },\n        propsSchema: \"Available - use component-specific update tools\",\n      });\n    });\n  });\n\n  test(\"snapshot hook returns immutable copies\", async () => {\n    const Note: React.FC<{ title: string }> = ({ title }) => <div>{title}</div>;\n    const InteractableNote = withTamboInteractable(Note, {\n      componentName: \"Note\",\n      description: \"A note\",\n      propsSchema: z.object({ title: z.string() }),\n    });\n\n    const TestComponent = () => {\n      const snapshot = useCurrentInteractablesSnapshot();\n      const [testResult, setTestResult] = React.useState<string>(\"pending\");\n\n      React.useEffect(() => {\n        if (snapshot.length > 0) {\n          const originalLength = snapshot.length;\n\n          // Try to mutate the returned array and props\n          snapshot.push({\n            id: \"fake\",\n            name: \"Fake\",\n            description: \"\",\n            component: () => null,\n            props: {},\n          } as any);\n          (snapshot[0].props as any).title = \"MUTATED\";\n\n          // The mutations should succeed on the returned copy, proving it's a separate object\n          if (\n            snapshot.length === originalLength + 1 &&\n            snapshot[0].props.title === \"MUTATED\"\n          ) {\n            setTestResult(\"mutation-successful-but-isolated\");\n          } else {\n            setTestResult(\"mutation-failed\");\n          }\n        }\n      }, [snapshot]);\n\n      return <div data-testid=\"test-result\">{testResult}</div>;\n    };\n\n    const { getByTestId } = render(\n      wrapperWithProviders(\n        <TamboInteractableProvider>\n          <InteractableNote title=\"immutable test\" />\n          <TestComponent />\n        </TamboInteractableProvider>,\n      ),\n    );\n\n    await waitFor(() => {\n      const result = getByTestId(\"test-result\").textContent;\n      expect(result).toBe(\"mutation-successful-but-isolated\");\n    });\n  });\n\n  test(\"multiple interactables from same provider appear in context\", async () => {\n    const Note: React.FC<{ title: string }> = ({ title }) => <div>{title}</div>;\n    const Counter: React.FC<{ count: number }> = ({ count }) => (\n      <div>{count}</div>\n    );\n\n    const InteractableNote = withTamboInteractable(Note, {\n      componentName: \"Note\",\n      description: \"A note\",\n      propsSchema: z.object({ title: z.string() }),\n    });\n\n    const InteractableCounter = withTamboInteractable(Counter, {\n      componentName: \"Counter\",\n      description: \"A counter\",\n      propsSchema: z.object({ count: z.number() }),\n    });\n\n    let capturedContexts: any[] = [];\n    const TestComponent = () => {\n      const { getAdditionalContext } = useTamboContextHelpers();\n\n      React.useEffect(() => {\n        let mounted = true;\n        void getAdditionalContext().then((contexts) => {\n          if (mounted) {\n            capturedContexts = contexts;\n          }\n        });\n        return () => {\n          mounted = false;\n        };\n      }, [getAdditionalContext]);\n\n      return <div data-testid=\"ready\">ready</div>;\n    };\n\n    const { getByTestId } = render(\n      wrapperWithProviders(\n        <TamboInteractableProvider>\n          <InteractableNote title=\"first\" />\n          <InteractableCounter count={42} />\n          <TestComponent />\n        </TamboInteractableProvider>,\n      ),\n    );\n\n    await waitFor(() => {\n      expect(getByTestId(\"ready\")).toBeInTheDocument();\n      const entry = capturedContexts.find(\n        (c: any) => c.name === \"interactables\",\n      );\n      expect(entry?.context?.components).toHaveLength(2);\n\n      const components = entry!.context.components;\n      expect(components[0].componentName).toBe(\"Note\");\n      expect(components[0].props).toEqual({ title: \"first\" });\n      expect(components[1].componentName).toBe(\"Counter\");\n      expect(components[1].props).toEqual({ count: 42 });\n    });\n  });\n\n  test(\"can be disabled by returning null\", async () => {\n    const Note: React.FC<{ title: string }> = ({ title }) => <div>{title}</div>;\n    const InteractableNote = withTamboInteractable(Note, {\n      componentName: \"Note\",\n      description: \"A note\",\n      propsSchema: z.object({ title: z.string() }),\n    });\n\n    // Create a context helpers provider with a disabled interactables helper\n    const DisabledContextHelpers = ({\n      children,\n    }: {\n      children: React.ReactNode;\n    }) => (\n      <TamboContextHelpersProvider\n        contextHelpers={{\n          [\"interactables\"]: () => null,\n        }}\n      >\n        {children}\n      </TamboContextHelpersProvider>\n    );\n\n    let capturedContexts: any[] = [];\n    const TestComponent = () => {\n      const { getAdditionalContext } = useTamboContextHelpers();\n\n      React.useEffect(() => {\n        let mounted = true;\n        void getAdditionalContext().then((contexts) => {\n          if (mounted) {\n            capturedContexts = contexts;\n          }\n        });\n        return () => {\n          mounted = false;\n        };\n      }, [getAdditionalContext]);\n\n      return <div data-testid=\"ready\">ready</div>;\n    };\n\n    const thread = {\n      id: \"t-1\",\n      projectId: \"p-1\",\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      messages: [],\n      metadata: {},\n    } as any;\n\n    const { getByTestId } = render(\n      <TamboStubProvider\n        thread={thread}\n        registerTool={() => {}}\n        registerTools={() => {}}\n        registerComponent={() => {}}\n        addToolAssociation={() => {}}\n      >\n        <DisabledContextHelpers>\n          <TamboInteractableProvider>\n            <InteractableNote title=\"should not appear\" />\n            <TestComponent />\n          </TamboInteractableProvider>\n        </DisabledContextHelpers>\n      </TamboStubProvider>,\n    );\n\n    await waitFor(() => {\n      expect(getByTestId(\"ready\")).toBeInTheDocument();\n      const entry = capturedContexts.find(\n        (c: any) => c.name === \"interactables\",\n      );\n      expect(entry).toBeUndefined(); // Should be filtered out when helper returns null\n    });\n  });\n});\n"]}
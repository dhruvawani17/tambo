{"version":3,"file":"tambo-registry-schema-compat.test.js","sourceRoot":"","sources":["../../src/providers/tambo-registry-schema-compat.test.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Tests for schema compatibility with registerTool and registerComponent.\n *\n * These tests verify that the registry functions work correctly with:\n * - Zod 3 schemas (current primary)\n * - Zod 4 schemas (Standard Schema native)\n * - Raw JSON Schema objects\n */\nimport { act, renderHook } from \"@testing-library/react\";\nimport type { JSONSchema7 } from \"json-schema\";\nimport React from \"react\";\nimport * as z3 from \"zod/v3\";\nimport * as z4 from \"zod/v4\";\nimport { TamboComponent } from \"../model/component-metadata\";\nimport { defineTool } from \"../util/registry\";\nimport {\n  TamboRegistryProvider,\n  useTamboRegistry,\n} from \"./tambo-registry-provider\";\n\n// Test component for registration tests\nconst TestComponent: React.FC<{ message: string }> = ({ message }) => (\n  <div>{message}</div>\n);\n\ndescribe(\"Schema Compatibility\", () => {\n  const wrapper = ({ children }: { children: React.ReactNode }) => (\n    <TamboRegistryProvider>{children}</TamboRegistryProvider>\n  );\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe(\"registerComponent with different schema types\", () => {\n    describe(\"Zod 3 schemas\", () => {\n      it(\"should register component with Zod 3 object schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const component: TamboComponent = {\n          name: \"Zod3ObjectComponent\",\n          component: TestComponent,\n          description: \"Component with Zod 3 object schema\",\n          propsSchema: z3.object({\n            message: z3.string().describe(\"The message to display\"),\n            count: z3.number().optional().describe(\"Optional count\"),\n          }),\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"Zod3ObjectComponent\",\n        );\n        const registered = result.current.componentList.Zod3ObjectComponent;\n        expect(registered.name).toBe(\"Zod3ObjectComponent\");\n        expect(registered.props).toBeDefined();\n        expect(registered.props).toHaveProperty(\"type\", \"object\");\n      });\n\n      it(\"should register component with Zod 3 nested object schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const component: TamboComponent = {\n          name: \"Zod3NestedComponent\",\n          component: TestComponent,\n          description: \"Component with nested Zod 3 schema\",\n          propsSchema: z3.object({\n            user: z3.object({\n              name: z3.string(),\n              email: z3.string().email(),\n            }),\n            settings: z3.object({\n              theme: z3.enum([\"light\", \"dark\"]),\n              notifications: z3.boolean(),\n            }),\n          }),\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"Zod3NestedComponent\",\n        );\n      });\n\n      it(\"should register component with Zod 3 array schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const component: TamboComponent = {\n          name: \"Zod3ArrayComponent\",\n          component: TestComponent,\n          description: \"Component with Zod 3 array schema\",\n          propsSchema: z3.object({\n            items: z3.array(z3.string()).describe(\"List of items\"),\n            tags: z3.array(\n              z3.object({\n                id: z3.number(),\n                label: z3.string(),\n              }),\n            ),\n          }),\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"Zod3ArrayComponent\",\n        );\n      });\n\n      it(\"should register component with Zod 3 union schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const component: TamboComponent = {\n          name: \"Zod3UnionComponent\",\n          component: TestComponent,\n          description: \"Component with Zod 3 union schema\",\n          propsSchema: z3.object({\n            value: z3.union([z3.string(), z3.number()]),\n            status: z3.enum([\"pending\", \"active\", \"completed\"]),\n          }),\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"Zod3UnionComponent\",\n        );\n      });\n    });\n\n    describe(\"Zod 4 schemas\", () => {\n      it(\"should register component with Zod 4 object schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const component: TamboComponent = {\n          name: \"Zod4ObjectComponent\",\n          component: TestComponent,\n          description: \"Component with Zod 4 object schema\",\n          propsSchema: z4.object({\n            message: z4.string().describe(\"The message to display\"),\n            count: z4.number().optional().describe(\"Optional count\"),\n          }),\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"Zod4ObjectComponent\",\n        );\n        const registered = result.current.componentList.Zod4ObjectComponent;\n        expect(registered.name).toBe(\"Zod4ObjectComponent\");\n        expect(registered.props).toBeDefined();\n        expect(registered.props).toHaveProperty(\"type\", \"object\");\n      });\n\n      it(\"should register component with Zod 4 nested object schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const component: TamboComponent = {\n          name: \"Zod4NestedComponent\",\n          component: TestComponent,\n          description: \"Component with nested Zod 4 schema\",\n          propsSchema: z4.object({\n            user: z4.object({\n              name: z4.string(),\n              email: z4.email(),\n            }),\n            settings: z4.object({\n              theme: z4.enum([\"light\", \"dark\"]),\n              notifications: z4.boolean(),\n            }),\n          }),\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"Zod4NestedComponent\",\n        );\n      });\n\n      it(\"should register component with Zod 4 array schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const component: TamboComponent = {\n          name: \"Zod4ArrayComponent\",\n          component: TestComponent,\n          description: \"Component with Zod 4 array schema\",\n          propsSchema: z4.object({\n            items: z4.array(z4.string()).describe(\"List of items\"),\n            tags: z4.array(\n              z4.object({\n                id: z4.number(),\n                label: z4.string(),\n              }),\n            ),\n          }),\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"Zod4ArrayComponent\",\n        );\n      });\n\n      it(\"should register component with Zod 4 union schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const component: TamboComponent = {\n          name: \"Zod4UnionComponent\",\n          component: TestComponent,\n          description: \"Component with Zod 4 union schema\",\n          propsSchema: z4.object({\n            value: z4.union([z4.string(), z4.number()]),\n            status: z4.enum([\"pending\", \"active\", \"completed\"]),\n          }),\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"Zod4UnionComponent\",\n        );\n      });\n    });\n\n    describe(\"JSON Schema objects\", () => {\n      it(\"should register component with raw JSON Schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const jsonSchema: JSONSchema7 = {\n          type: \"object\",\n          properties: {\n            message: { type: \"string\", description: \"The message to display\" },\n            count: { type: \"number\", description: \"Optional count\" },\n          },\n          required: [\"message\"],\n        };\n\n        const component: TamboComponent = {\n          name: \"JsonSchemaComponent\",\n          component: TestComponent,\n          description: \"Component with raw JSON Schema\",\n          propsSchema: jsonSchema,\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"JsonSchemaComponent\",\n        );\n        const registered = result.current.componentList.JsonSchemaComponent;\n        expect(registered.props).toEqual(jsonSchema);\n      });\n\n      it(\"should register component with complex JSON Schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const jsonSchema: JSONSchema7 = {\n          type: \"object\",\n          properties: {\n            user: {\n              type: \"object\",\n              properties: {\n                name: { type: \"string\" },\n                email: { type: \"string\", format: \"email\" },\n              },\n              required: [\"name\", \"email\"],\n            },\n            items: {\n              type: \"array\",\n              items: {\n                type: \"object\",\n                properties: {\n                  id: { type: \"number\" },\n                  label: { type: \"string\" },\n                },\n              },\n            },\n          },\n          required: [\"user\"],\n        };\n\n        const component: TamboComponent = {\n          name: \"ComplexJsonSchemaComponent\",\n          component: TestComponent,\n          description: \"Component with complex JSON Schema\",\n          propsSchema: jsonSchema,\n        };\n\n        act(() => {\n          result.current.registerComponent(component);\n        });\n\n        expect(result.current.componentList).toHaveProperty(\n          \"ComplexJsonSchemaComponent\",\n        );\n      });\n    });\n  });\n\n  describe(\"registerTool with different schema types\", () => {\n    describe(\"Deprecated toolSchema throws error\", () => {\n      const deprecatedTool = {\n        name: \"deprecated-tool\",\n        description: \"Tool with deprecated toolSchema\",\n        tool: jest.fn().mockResolvedValue(\"result\"),\n        toolSchema: z3\n          .function()\n          .args(z3.string().describe(\"input parameter\"))\n          .returns(z3.string()),\n      };\n\n      it(\"should throw error when using deprecated toolSchema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        expect(() => {\n          act(() => result.current.registerTool(deprecatedTool));\n        }).toThrow(\n          'Tool \"deprecated-tool\" uses deprecated \"toolSchema\" property.',\n        );\n      });\n\n      it(\"registerTools should throw error when using deprecated toolSchema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        expect(() => {\n          act(() => result.current.registerTools([deprecatedTool]));\n        }).toThrow(\n          'Tool \"deprecated-tool\" uses deprecated \"toolSchema\" property.',\n        );\n      });\n    });\n\n    describe(\"Zod 3 object schemas for tools\", () => {\n      it(\"should register tool with Zod 3 object inputSchema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const tool = defineTool({\n          name: \"zod3-object-tool\",\n          description: \"Tool with Zod 3 object schema\",\n          tool: jest.fn().mockResolvedValue(\"result\"),\n          inputSchema: z3.object({\n            query: z3.string().describe(\"search query\"),\n            limit: z3.number().optional().describe(\"max results\"),\n          }),\n          outputSchema: z3.string(),\n        });\n\n        act(() => {\n          result.current.registerTool(tool);\n        });\n\n        expect(result.current.toolRegistry).toHaveProperty(\"zod3-object-tool\");\n      });\n    });\n\n    describe(\"Zod 4 object schemas for tools\", () => {\n      // Note: inputSchema must always be an object schema\n      // The tool function receives a single object argument with all parameters\n\n      it(\"should register tool with Zod 4 object schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const tool = defineTool({\n          name: \"zod4-object-tool\",\n          description: \"Tool with Zod 4 object schema\",\n          tool: jest.fn().mockResolvedValue(\"result\"),\n          inputSchema: z4.object({\n            input: z4.string().describe(\"input parameter\"),\n          }),\n          outputSchema: z4.string(),\n        });\n\n        act(() => {\n          result.current.registerTool(tool);\n        });\n\n        expect(result.current.toolRegistry).toHaveProperty(\"zod4-object-tool\");\n      });\n\n      it(\"should register tool with Zod 4 object schema with multiple fields\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const tool = defineTool({\n          name: \"zod4-multi-field-tool\",\n          description: \"Tool with multiple Zod 4 fields\",\n          tool: jest.fn().mockResolvedValue(\"result\"),\n          inputSchema: z4.object({\n            first: z4.string().describe(\"first argument\"),\n            second: z4.number().describe(\"second argument\"),\n            third: z4.boolean().optional().describe(\"optional third argument\"),\n          }),\n          outputSchema: z4.array(z4.string()),\n        });\n\n        act(() => {\n          result.current.registerTool(tool);\n        });\n\n        expect(result.current.toolRegistry).toHaveProperty(\n          \"zod4-multi-field-tool\",\n        );\n      });\n\n      it(\"should register tool with Zod 4 nested object schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const tool = defineTool({\n          name: \"zod4-nested-object-tool\",\n          description: \"Tool with Zod 4 nested object\",\n          tool: jest.fn().mockResolvedValue(\"result\"),\n          inputSchema: z4\n            .object({\n              query: z4.string().describe(\"search query\"),\n              limit: z4.number().optional().describe(\"max results\"),\n              filters: z4.array(z4.string()).optional(),\n            })\n            .describe(\"search options\"),\n          outputSchema: z4.array(z4.string()),\n        });\n\n        act(() => {\n          result.current.registerTool(tool);\n        });\n\n        expect(result.current.toolRegistry).toHaveProperty(\n          \"zod4-nested-object-tool\",\n        );\n      });\n    });\n\n    describe(\"JSON Schema for tools\", () => {\n      it(\"should register tool with JSON Schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const jsonSchema: JSONSchema7 = {\n          type: \"object\",\n          description: \"Tool parameters\",\n          properties: {\n            query: { type: \"string\", description: \"The search query\" },\n            limit: { type: \"number\", description: \"Max results to return\" },\n          },\n          required: [\"query\"],\n        };\n\n        const tool = defineTool({\n          name: \"json-schema-tool\",\n          description: \"Tool with raw JSON Schema\",\n          tool: jest.fn().mockResolvedValue(\"result\"),\n          inputSchema: jsonSchema,\n          outputSchema: {},\n        });\n\n        act(() => {\n          result.current.registerTool(tool);\n        });\n\n        expect(result.current.toolRegistry).toHaveProperty(\"json-schema-tool\");\n      });\n\n      it(\"should register tool with complex JSON Schema\", () => {\n        const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n        const jsonSchema: JSONSchema7 = {\n          type: \"object\",\n          description: \"Complex search parameters\",\n          properties: {\n            search: {\n              type: \"object\",\n              properties: {\n                query: { type: \"string\" },\n                filters: {\n                  type: \"array\",\n                  items: {\n                    type: \"object\",\n                    properties: {\n                      field: { type: \"string\" },\n                      value: { type: \"string\" },\n                    },\n                  },\n                },\n              },\n              required: [\"query\"],\n            },\n            pagination: {\n              type: \"object\",\n              properties: {\n                page: { type: \"number\" },\n                pageSize: { type: \"number\" },\n              },\n            },\n          },\n          required: [\"search\"],\n        };\n\n        const tool = defineTool({\n          name: \"complex-json-schema-tool\",\n          description: \"Tool with complex JSON Schema\",\n          tool: jest.fn().mockResolvedValue(\"result\"),\n          inputSchema: jsonSchema,\n          outputSchema: {},\n        });\n\n        act(() => {\n          result.current.registerTool(tool);\n        });\n\n        expect(result.current.toolRegistry).toHaveProperty(\n          \"complex-json-schema-tool\",\n        );\n      });\n    });\n  });\n\n  describe(\"Schema validation errors\", () => {\n    it(\"should reject Zod 3 z.record() in component propsSchema\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      const component: TamboComponent = {\n        name: \"InvalidZod3RecordComponent\",\n        component: TestComponent,\n        description: \"Component with invalid z.record() schema\",\n        propsSchema: z3.record(z3.string()),\n      };\n\n      expect(() => {\n        act(() => {\n          result.current.registerComponent(component);\n        });\n      }).toThrow(\n        /Record types \\(objects with dynamic keys\\) are not supported/,\n      );\n    });\n\n    it(\"should reject Zod 4 z.record() in component propsSchema\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      const component: TamboComponent = {\n        name: \"InvalidZod4RecordComponent\",\n        component: TestComponent,\n        description: \"Component with invalid Zod 4 z.record() schema\",\n        // Zod 4 record requires key type and value type\n        propsSchema: z4.record(z4.string(), z4.string()),\n      };\n\n      expect(() => {\n        act(() => {\n          result.current.registerComponent(component);\n        });\n      }).toThrow(\n        /Record types \\(objects with dynamic keys\\) are not supported/,\n      );\n    });\n\n    it(\"should reject Zod 3 z.record() in tool schema\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      const tool = defineTool({\n        name: \"invalid-zod3-record-tool\",\n        description: \"Tool with invalid z.record() schema\",\n        tool: jest.fn().mockResolvedValue(\"result\"),\n        inputSchema: z3.object({\n          metadata: z3.record(z3.string()),\n        }),\n        outputSchema: z3.string(),\n      });\n\n      expect(() => {\n        act(() => {\n          result.current.registerTool(tool);\n        });\n      }).toThrow(\n        /Record types \\(objects with dynamic keys\\) are not supported/,\n      );\n    });\n\n    it(\"should reject Zod 4 z.record() in tool schema\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      const tool = defineTool({\n        name: \"invalid-zod4-record-tool\",\n        description: \"Tool with invalid Zod 4 z.record() schema\",\n        tool: jest.fn().mockResolvedValue(\"result\"),\n        inputSchema: z4.object({\n          metadata: z4.record(z4.string(), z4.string()),\n        }),\n        outputSchema: z4.string(),\n      });\n\n      expect(() => {\n        act(() => {\n          result.current.registerTool(tool);\n        });\n      }).toThrow(\n        /Record types \\(objects with dynamic keys\\) are not supported/,\n      );\n    });\n\n    it(\"should reject non-object inputSchema (tuple)\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      const tool = defineTool({\n        name: \"invalid-tuple-tool\",\n        description: \"Tool with tuple inputSchema\",\n        tool: jest.fn().mockResolvedValue(\"result\"),\n        inputSchema: z4.tuple([z4.string()]),\n        outputSchema: z4.string(),\n      });\n\n      expect(() => {\n        act(() => {\n          result.current.registerTool(tool);\n        });\n      }).toThrow(/must be an object schema/);\n    });\n\n    it(\"should reject non-object inputSchema (string)\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      const tool = defineTool({\n        name: \"invalid-string-tool\",\n        description: \"Tool with string inputSchema\",\n        tool: jest.fn().mockResolvedValue(\"result\"),\n        inputSchema: z4.string(),\n        outputSchema: z4.string(),\n      });\n\n      expect(() => {\n        act(() => {\n          result.current.registerTool(tool);\n        });\n      }).toThrow(/must be an object schema/);\n    });\n  });\n\n  describe(\"Cross-version compatibility\", () => {\n    it(\"should register components with mixed Zod 3 and Zod 4 schemas\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      // Register Zod 3 component\n      const zod3Component: TamboComponent = {\n        name: \"MixedZod3Component\",\n        component: TestComponent,\n        description: \"Zod 3 component\",\n        propsSchema: z3.object({ value: z3.string() }),\n      };\n\n      // Register Zod 4 component\n      const zod4Component: TamboComponent = {\n        name: \"MixedZod4Component\",\n        component: TestComponent,\n        description: \"Zod 4 component\",\n        propsSchema: z4.object({ value: z4.string() }),\n      };\n\n      act(() => {\n        result.current.registerComponent(zod3Component);\n        result.current.registerComponent(zod4Component);\n      });\n\n      expect(result.current.componentList).toHaveProperty(\"MixedZod3Component\");\n      expect(result.current.componentList).toHaveProperty(\"MixedZod4Component\");\n    });\n\n    it(\"should register tools with mixed Zod 3, Zod 4, and JSON Schema\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      // Zod 3 tool (using object inputSchema)\n      const zod3Tool = defineTool({\n        name: \"mixed-zod3-tool\",\n        description: \"Zod 3 tool\",\n        tool: jest.fn().mockResolvedValue(\"result\"),\n        inputSchema: z3.object({\n          input: z3.string(),\n        }),\n        outputSchema: z3.string(),\n      });\n\n      // Zod 4 tool (using Standard Schema with object inputSchema)\n      const zod4Tool = defineTool({\n        name: \"mixed-zod4-tool\",\n        description: \"Zod 4 tool\",\n        tool: jest.fn().mockResolvedValue(\"result\"),\n        inputSchema: z4.object({\n          input: z4.string(),\n        }),\n        outputSchema: z4.string(),\n      });\n\n      // JSON Schema tool\n      const jsonSchemaTool = defineTool({\n        name: \"mixed-json-schema-tool\",\n        description: \"JSON Schema tool\",\n        tool: jest.fn().mockResolvedValue(\"result\"),\n        inputSchema: {\n          type: \"object\",\n          properties: {\n            input: { type: \"string\" },\n          },\n        },\n        outputSchema: { type: \"string\" },\n      });\n\n      act(() => {\n        result.current.registerTools([zod3Tool, zod4Tool, jsonSchemaTool]);\n      });\n\n      expect(result.current.toolRegistry).toHaveProperty(\"mixed-zod3-tool\");\n      expect(result.current.toolRegistry).toHaveProperty(\"mixed-zod4-tool\");\n      expect(result.current.toolRegistry).toHaveProperty(\n        \"mixed-json-schema-tool\",\n      );\n    });\n  });\n\n  describe(\"Standard Schema interface verification\", () => {\n    it(\"should verify Zod 3 schema has ~standard property\", () => {\n      const schema = z3.object({ value: z3.string() });\n      expect(\"~standard\" in schema).toBe(true);\n    });\n\n    it(\"should verify Zod 4 schema has ~standard property\", () => {\n      const schema = z4.object({ value: z4.string() });\n      expect(\"~standard\" in schema).toBe(true);\n    });\n\n    it(\"should verify JSON Schema does not have ~standard property\", () => {\n      const schema: JSONSchema7 = {\n        type: \"object\",\n        properties: { value: { type: \"string\" } },\n      };\n      expect(\"~standard\" in schema).toBe(false);\n    });\n  });\n  describe(\"registerTool preserves maxCalls\", () => {\n    it(\"should preserve maxCalls for Zod 3 inputSchema tools\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      const tool = defineTool({\n        name: \"zod3-max-tool\",\n        description: \"Zod 3 tool with maxCalls\",\n        tool: jest.fn().mockResolvedValue(\"ok\"),\n        inputSchema: z3.object({ q: z3.string() }),\n        outputSchema: z3.string(),\n        maxCalls: 2,\n      });\n\n      act(() => {\n        result.current.registerTool(tool);\n      });\n\n      expect(result.current.toolRegistry[\"zod3-max-tool\"].maxCalls).toBe(2);\n    });\n\n    it(\"should preserve maxCalls for Zod 4 inputSchema tools\", () => {\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      const tool = defineTool({\n        name: \"zod4-max-tool\",\n        description: \"Zod 4 tool with maxCalls\",\n        tool: jest.fn().mockResolvedValue(\"ok\"),\n        inputSchema: z4.object({ q: z4.string() }),\n        outputSchema: z4.string(),\n        maxCalls: 3,\n      });\n\n      act(() => {\n        result.current.registerTool(tool);\n      });\n\n      expect(result.current.toolRegistry[\"zod4-max-tool\"].maxCalls).toBe(3);\n    });\n  });\n});\n"]}
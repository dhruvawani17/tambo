"use strict";
/**
 * Global context helpers registry.
 * Consumers can add/remove helpers and resolve additional context anywhere.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveAdditionalContext = resolveAdditionalContext;
/**
 * Resolve all helpers to AdditionalContext entries, skipping null/undefined and errors.
 * @returns The resolved additional context.
 */
async function resolveAdditionalContext(helpers) {
    const entries = Object.entries(helpers);
    if (entries.length === 0)
        return [];
    const results = await Promise.all(entries.map(async ([name, fn]) => {
        try {
            const value = await fn();
            if (value == null)
                return null;
            return { name, context: value };
        }
        catch (error) {
            console.error(`Error running context helper ${name}:`, error);
            return null;
        }
    }));
    return results.filter(Boolean);
}
//# sourceMappingURL=registry.js.map
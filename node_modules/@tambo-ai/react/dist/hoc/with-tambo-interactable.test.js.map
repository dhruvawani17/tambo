{"version":3,"file":"with-tambo-interactable.test.js","sourceRoot":"","sources":["../../src/hoc/with-tambo-interactable.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { render, screen, waitFor } from \"@testing-library/react\";\nimport React from \"react\";\nimport { z } from \"zod/v3\";\nimport { useTamboCurrentComponent } from \"../hooks/use-current-message\";\nimport { TamboInteractableProvider } from \"../providers/tambo-interactable-provider\";\nimport { withTamboInteractable } from \"./with-tambo-interactable\";\n\n// Create a consistent mock implementation\nconst mockAddInteractableComponent = jest.fn(() => \"mock-id-123\");\nconst mockUpdateInteractableComponentProps = jest.fn();\nconst mockGetInteractableComponent = jest.fn(() => null);\nconst mockRemoveInteractableComponent = jest.fn();\nconst mockGetInteractableComponentsByName = jest.fn(() => []);\nconst mockClearAllInteractableComponents = jest.fn();\n\n// Mock the interactable provider\njest.mock(\"../providers/tambo-interactable-provider\", () => ({\n  TamboInteractableProvider: ({ children }: { children: React.ReactNode }) => (\n    <div data-testid=\"interactable-provider\">{children}</div>\n  ),\n  useTamboInteractable: () => ({\n    addInteractableComponent: mockAddInteractableComponent,\n    updateInteractableComponentProps: mockUpdateInteractableComponentProps,\n    getInteractableComponent: mockGetInteractableComponent,\n    removeInteractableComponent: mockRemoveInteractableComponent,\n    getInteractableComponentsByName: mockGetInteractableComponentsByName,\n    clearAllInteractableComponents: mockClearAllInteractableComponents,\n    interactableComponents: [],\n  }),\n}));\n\ndescribe(\"withTamboInteractable\", () => {\n  // Simple test component\n  interface TestComponentProps {\n    title: string;\n    count?: number;\n  }\n\n  const TestComponent: React.FC<TestComponentProps> = ({ title, count }) => (\n    <div>\n      <h1 data-testid=\"title\">{title}</h1>\n      {count !== undefined && <span data-testid=\"count\">{count}</span>}\n    </div>\n  );\n\n  const testSchema = z.object({\n    title: z.string(),\n    count: z.number().optional(),\n  });\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    // Reset mock implementations\n    mockAddInteractableComponent.mockReturnValue(\"mock-id-123\");\n    mockGetInteractableComponent.mockReturnValue(null);\n    mockGetInteractableComponentsByName.mockReturnValue([]);\n  });\n\n  it(\"should render the wrapped component with provided props\", () => {\n    const InteractableComponent = withTamboInteractable(TestComponent, {\n      componentName: \"TestComponent\",\n      description: \"A test component\",\n      propsSchema: testSchema,\n    });\n\n    render(\n      <TamboInteractableProvider>\n        <InteractableComponent title=\"Hello\" count={42} />\n      </TamboInteractableProvider>,\n    );\n\n    expect(screen.getByTestId(\"title\")).toHaveTextContent(\"Hello\");\n    expect(screen.getByTestId(\"count\")).toHaveTextContent(\"42\");\n  });\n\n  it(\"should set displayName correctly\", () => {\n    const InteractableComponent = withTamboInteractable(TestComponent, {\n      componentName: \"TestComponent\",\n      description: \"A test component\",\n    });\n\n    expect(InteractableComponent.displayName).toBe(\n      \"withTamboInteractable(TestComponent)\",\n    );\n  });\n\n  it(\"should handle components without displayName\", () => {\n    const AnonymousComponent = () => <div>Anonymous</div>;\n\n    const InteractableComponent = withTamboInteractable(AnonymousComponent, {\n      componentName: \"AnonymousComponent\",\n      description: \"An anonymous component\",\n    });\n\n    // Anonymous components get their name from the function name\n    expect(InteractableComponent.displayName).toBe(\n      \"withTamboInteractable(AnonymousComponent)\",\n    );\n  });\n\n  it(\"should provide TamboMessageProvider with interactable metadata\", async () => {\n    // Child component that uses the context\n    const ContextConsumer = () => {\n      const component = useTamboCurrentComponent();\n      return (\n        <div>\n          <span data-testid=\"interactable-id\">{component?.interactableId}</span>\n          <span data-testid=\"component-name\">{component?.componentName}</span>\n          <span data-testid=\"description\">{component?.description}</span>\n        </div>\n      );\n    };\n\n    // Wrap TestComponent to include ContextConsumer\n    const TestComponentWithConsumer: React.FC<TestComponentProps> = (props) => (\n      <div>\n        <TestComponent {...props} />\n        <ContextConsumer />\n      </div>\n    );\n\n    const InteractableWithConsumer = withTamboInteractable(\n      TestComponentWithConsumer,\n      {\n        componentName: \"TestComponent\",\n        description: \"A test component\",\n        propsSchema: testSchema,\n      },\n    );\n\n    render(\n      <TamboInteractableProvider>\n        <InteractableWithConsumer title=\"Hello\" />\n      </TamboInteractableProvider>,\n    );\n\n    // Wait for the component to register and render\n    await waitFor(() => {\n      expect(screen.getByTestId(\"interactable-id\")).toHaveTextContent(\n        \"mock-id-123\",\n      );\n    });\n\n    expect(screen.getByTestId(\"component-name\")).toHaveTextContent(\n      \"TestComponent\",\n    );\n    expect(screen.getByTestId(\"description\")).toHaveTextContent(\n      \"A test component\",\n    );\n  });\n\n  it(\"should create minimal message with correct structure\", async () => {\n    // Child component that checks the message structure\n    const MessageChecker = () => {\n      const component = useTamboCurrentComponent();\n      return (\n        <div>\n          <span data-testid=\"has-component-name\">\n            {component?.componentName ? \"yes\" : \"no\"}\n          </span>\n          <span data-testid=\"has-props\">{component?.props ? \"yes\" : \"no\"}</span>\n          <span data-testid=\"has-interactable-id\">\n            {component?.interactableId ? \"yes\" : \"no\"}\n          </span>\n          <span data-testid=\"has-description\">\n            {component?.description ? \"yes\" : \"no\"}\n          </span>\n        </div>\n      );\n    };\n\n    const TestComponentWithChecker: React.FC<TestComponentProps> = (props) => (\n      <div>\n        <TestComponent {...props} />\n        <MessageChecker />\n      </div>\n    );\n\n    const InteractableWithChecker = withTamboInteractable(\n      TestComponentWithChecker,\n      {\n        componentName: \"TestComponent\",\n        description: \"A test component\",\n        propsSchema: testSchema,\n      },\n    );\n\n    render(\n      <TamboInteractableProvider>\n        <InteractableWithChecker title=\"Hello\" count={42} />\n      </TamboInteractableProvider>,\n    );\n\n    await waitFor(() => {\n      expect(screen.getByTestId(\"has-component-name\")).toHaveTextContent(\"yes\");\n    });\n\n    expect(screen.getByTestId(\"has-props\")).toHaveTextContent(\"yes\");\n    expect(screen.getByTestId(\"has-interactable-id\")).toHaveTextContent(\"yes\");\n    expect(screen.getByTestId(\"has-description\")).toHaveTextContent(\"yes\");\n  });\n\n  it(\"should pass through all component props correctly\", () => {\n    const InteractableComponent = withTamboInteractable(TestComponent, {\n      componentName: \"TestComponent\",\n      description: \"A test component\",\n      propsSchema: testSchema,\n    });\n\n    render(\n      <TamboInteractableProvider>\n        <InteractableComponent title=\"Test Title\" count={100} />\n      </TamboInteractableProvider>,\n    );\n\n    expect(screen.getByTestId(\"title\")).toHaveTextContent(\"Test Title\");\n    expect(screen.getByTestId(\"count\")).toHaveTextContent(\"100\");\n  });\n\n  it(\"should filter out interactable-specific props from component props\", () => {\n    interface ExtendedProps extends TestComponentProps {\n      onInteractableReady?: (id: string) => void;\n      onPropsUpdate?: (props: Record<string, any>) => void;\n    }\n\n    const ExtendedComponent: React.FC<ExtendedProps> = ({\n      title,\n      onInteractableReady,\n      onPropsUpdate,\n    }) => (\n      <div>\n        <span data-testid=\"title\">{title}</span>\n        <span data-testid=\"has-ready\">\n          {onInteractableReady ? \"yes\" : \"no\"}\n        </span>\n        <span data-testid=\"has-update\">{onPropsUpdate ? \"yes\" : \"no\"}</span>\n      </div>\n    );\n\n    const InteractableComponent = withTamboInteractable(ExtendedComponent, {\n      componentName: \"ExtendedComponent\",\n      description: \"An extended component\",\n    });\n\n    const mockReady = jest.fn();\n    const mockUpdate = jest.fn();\n\n    render(\n      <TamboInteractableProvider>\n        <InteractableComponent\n          title=\"Test\"\n          onInteractableReady={mockReady}\n          onPropsUpdate={mockUpdate}\n        />\n      </TamboInteractableProvider>,\n    );\n\n    expect(screen.getByTestId(\"title\")).toHaveTextContent(\"Test\");\n    // These props should be filtered out\n    expect(screen.getByTestId(\"has-ready\")).toHaveTextContent(\"no\");\n    expect(screen.getByTestId(\"has-update\")).toHaveTextContent(\"no\");\n  });\n\n  it(\"should work without propsSchema\", () => {\n    const InteractableComponent = withTamboInteractable(TestComponent, {\n      componentName: \"TestComponent\",\n      description: \"A test component\",\n    });\n\n    render(\n      <TamboInteractableProvider>\n        <InteractableComponent title=\"No Schema\" />\n      </TamboInteractableProvider>,\n    );\n\n    expect(screen.getByTestId(\"title\")).toHaveTextContent(\"No Schema\");\n  });\n\n  it(\"should render before interactable ID is set\", () => {\n    const InteractableComponent = withTamboInteractable(TestComponent, {\n      componentName: \"TestComponent\",\n      description: \"A test component\",\n    });\n\n    const { container } = render(\n      <TamboInteractableProvider>\n        <InteractableComponent title=\"Early Render\" />\n      </TamboInteractableProvider>,\n    );\n\n    // Component should render even before ID is available\n    expect(\n      container.querySelector('[data-testid=\"title\"]'),\n    ).toBeInTheDocument();\n  });\n\n  it(\"should handle null/undefined values in props\", () => {\n    interface NullableProps {\n      title: string;\n      optional?: string;\n      nullable: string | null;\n    }\n\n    const NullableComponent: React.FC<NullableProps> = ({\n      title,\n      optional,\n      nullable,\n    }) => (\n      <div>\n        <span data-testid=\"title\">{title}</span>\n        <span data-testid=\"optional\">{optional ?? \"undefined\"}</span>\n        <span data-testid=\"nullable\">{nullable ?? \"null\"}</span>\n      </div>\n    );\n\n    const InteractableComponent = withTamboInteractable(NullableComponent, {\n      componentName: \"NullableComponent\",\n      description: \"A component with nullable props\",\n    });\n\n    render(\n      <TamboInteractableProvider>\n        <InteractableComponent title=\"Test\" nullable={null} />\n      </TamboInteractableProvider>,\n    );\n\n    expect(screen.getByTestId(\"title\")).toHaveTextContent(\"Test\");\n    expect(screen.getByTestId(\"optional\")).toHaveTextContent(\"undefined\");\n    expect(screen.getByTestId(\"nullable\")).toHaveTextContent(\"null\");\n  });\n});\n"]}
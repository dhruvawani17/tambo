"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const json_patch_1 = require("./json-patch");
describe("applyJsonPatch error handling", () => {
    it("includes operation summary in error message", () => {
        const target = { existing: "value" };
        const operations = [
            { op: "replace", path: "/nonexistent", value: "fail" },
        ];
        expect(() => (0, json_patch_1.applyJsonPatch)(target, operations)).toThrow(/Failed to apply JSON patch operations \[replace \/nonexistent\]/);
    });
    it("includes target keys in error message", () => {
        const target = { foo: 1, bar: 2 };
        const operations = [
            { op: "replace", path: "/missing", value: "x" },
        ];
        expect(() => (0, json_patch_1.applyJsonPatch)(target, operations)).toThrow(/Target had keys: \[foo, bar\]/);
    });
    it("shows all operations in error summary", () => {
        const target = {};
        const operations = [
            { op: "add", path: "/a", value: 1 },
            { op: "replace", path: "/missing", value: 2 },
        ];
        expect(() => (0, json_patch_1.applyJsonPatch)(target, operations)).toThrow(/add \/a, replace \/missing/);
    });
});
//# sourceMappingURL=json-patch.test.js.map
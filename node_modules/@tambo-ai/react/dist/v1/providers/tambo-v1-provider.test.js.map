{"version":3,"file":"tambo-v1-provider.test.js","sourceRoot":"","sources":["../../../src/v1/providers/tambo-v1-provider.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { QueryClient, useQueryClient } from \"@tanstack/react-query\";\nimport { renderHook, act } from \"@testing-library/react\";\nimport React from \"react\";\nimport { z } from \"zod\";\nimport { useTamboClient } from \"../../providers/tambo-client-provider\";\nimport { useTamboRegistry } from \"../../providers/tambo-registry-provider\";\nimport { useTamboContextHelpers } from \"../../providers/tambo-context-helpers-provider\";\nimport { useStreamState, useThreadManagement } from \"./tambo-v1-stream-context\";\nimport { TamboV1Provider, useTamboV1Config } from \"./tambo-v1-provider\";\n\n// Mock the client provider to capture the apiKey\njest.mock(\"../../providers/tambo-client-provider\", () => ({\n  useTamboClient: jest.fn(),\n  useTamboQueryClient: jest.fn(() => new QueryClient()),\n  TamboClientProvider: ({ children }: { children: React.ReactNode }) =>\n    children,\n}));\n\n// Mock useTamboV1SendMessage to avoid complex dependencies\njest.mock(\"../hooks/use-tambo-v1-send-message\", () => ({\n  useTamboV1SendMessage: jest.fn(() => ({\n    mutateAsync: jest.fn(),\n    mutate: jest.fn(),\n    isPending: false,\n    isError: false,\n    error: null,\n    isSuccess: false,\n    reset: jest.fn(),\n  })),\n}));\n\ndescribe(\"TamboV1Provider\", () => {\n  const mockFetch: typeof fetch = async (..._args) => {\n    throw new Error(\"fetch not implemented\");\n  };\n\n  const mockClient = new TamboAI({\n    apiKey: \"test-api-key\",\n    fetch: mockFetch,\n  });\n\n  beforeEach(() => {\n    jest.mocked(useTamboClient).mockReturnValue(mockClient);\n  });\n\n  it(\"provides access to registry context\", () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\">{children}</TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n    expect(result.current.componentList).toBeDefined();\n    expect(result.current.toolRegistry).toBeDefined();\n    expect(typeof result.current.registerComponent).toBe(\"function\");\n    expect(typeof result.current.registerTool).toBe(\"function\");\n  });\n\n  it(\"provides access to stream context\", () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\">{children}</TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useStreamState(), { wrapper });\n\n    expect(result.current.threadMap).toBeDefined();\n    expect(result.current.currentThreadId).toBeNull();\n  });\n\n  it(\"manages threads via useThreadManagement\", () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\">{children}</TamboV1Provider>\n    );\n\n    const { result } = renderHook(\n      () => ({\n        state: useStreamState(),\n        management: useThreadManagement(),\n      }),\n      { wrapper },\n    );\n\n    // Initially no thread\n    expect(result.current.state.currentThreadId).toBeNull();\n\n    // Initialize and switch to a thread\n    act(() => {\n      result.current.management.initThread(\"thread_123\");\n      result.current.management.switchThread(\"thread_123\");\n    });\n\n    expect(result.current.state.currentThreadId).toBe(\"thread_123\");\n    expect(result.current.state.threadMap.thread_123).toBeDefined();\n  });\n\n  it(\"provides access to query client\", () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\">{children}</TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useQueryClient(), { wrapper });\n\n    expect(result.current).toBeInstanceOf(QueryClient);\n  });\n\n  it(\"uses custom query client when provided\", () => {\n    const customClient = new QueryClient();\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\" queryClient={customClient}>\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useQueryClient(), { wrapper });\n\n    expect(result.current).toBe(customClient);\n  });\n\n  it(\"registers components when provided\", () => {\n    const TestComponent = () => <div>Test</div>;\n    const propsSchema = z.object({\n      title: z.string().describe(\"The title\"),\n    });\n    const components = [\n      {\n        name: \"TestComponent\",\n        description: \"A test component\",\n        component: TestComponent,\n        propsSchema,\n      },\n    ];\n\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\" components={components}>\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n    expect(result.current.componentList.TestComponent).toBeDefined();\n    expect(result.current.componentList.TestComponent.name).toBe(\n      \"TestComponent\",\n    );\n  });\n\n  it(\"registers tools when provided\", () => {\n    const inputSchema = z.object({\n      query: z.string().describe(\"Search query\"),\n    });\n    const outputSchema = z.string().describe(\"Result string\");\n    const tools = [\n      {\n        name: \"testTool\",\n        description: \"A test tool\",\n        tool: async () => \"result\",\n        inputSchema,\n        outputSchema,\n      },\n    ];\n\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\" tools={tools}>\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n    expect(result.current.toolRegistry.testTool).toBeDefined();\n    expect(result.current.toolRegistry.testTool.name).toBe(\"testTool\");\n  });\n\n  it(\"registers MCP servers when provided\", () => {\n    const mcpServers = [\n      { url: \"https://mcp.example.com\", name: \"Example MCP\" },\n    ];\n\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\" mcpServers={mcpServers}>\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n    expect(result.current.mcpServerInfos).toHaveLength(1);\n    expect(result.current.mcpServerInfos[0].url).toBe(\n      \"https://mcp.example.com\",\n    );\n  });\n\n  it(\"provides onCallUnregisteredTool to registry\", () => {\n    const onCallUnregisteredTool = jest\n      .fn()\n      .mockResolvedValue(\"fallback result\");\n\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider\n        apiKey=\"test-api-key\"\n        onCallUnregisteredTool={onCallUnregisteredTool}\n      >\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n    expect(result.current.onCallUnregisteredTool).toBe(onCallUnregisteredTool);\n  });\n\n  it(\"registers static resources when provided\", () => {\n    const resources = [\n      {\n        uri: \"resource://test/example\",\n        name: \"Test Resource\",\n        description: \"A test resource\",\n        mimeType: \"text/plain\",\n      },\n    ];\n\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\" resources={resources}>\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n    expect(result.current.resources).toHaveLength(1);\n    expect(result.current.resources[0].uri).toBe(\"resource://test/example\");\n    expect(result.current.resources[0].name).toBe(\"Test Resource\");\n  });\n\n  it(\"registers resource source when listResources and getResource provided\", () => {\n    const listResources = jest.fn().mockResolvedValue({ resources: [] });\n    const getResource = jest.fn().mockResolvedValue({ contents: [] });\n\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider\n        apiKey=\"test-api-key\"\n        listResources={listResources}\n        getResource={getResource}\n      >\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n    expect(result.current.resourceSource).toBeDefined();\n    expect(result.current.resourceSource?.listResources).toBe(listResources);\n    expect(result.current.resourceSource?.getResource).toBe(getResource);\n  });\n\n  it(\"provides userKey via useTamboV1Config\", () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\" userKey=\"my-user-key\">\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboV1Config(), { wrapper });\n\n    expect(result.current.userKey).toBe(\"my-user-key\");\n  });\n\n  it(\"returns undefined userKey from useTamboV1Config when no userKey provided\", () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\">{children}</TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboV1Config(), { wrapper });\n\n    expect(result.current.userKey).toBeUndefined();\n  });\n\n  it(\"provides context helpers via useTamboContextHelpers hook\", async () => {\n    const contextHelpers = {\n      getUserName: () => \"Test User\",\n      getCurrentTime: () => new Date().toISOString(),\n    };\n\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\" contextHelpers={contextHelpers}>\n        {children}\n      </TamboV1Provider>\n    );\n\n    const { result, rerender } = renderHook(() => useTamboContextHelpers(), {\n      wrapper,\n    });\n\n    // Helpers are registered via useEffect, so we need to trigger a rerender\n    await act(async () => {\n      rerender();\n    });\n\n    const helpers = result.current.getContextHelpers();\n    expect(helpers.getUserName).toBe(contextHelpers.getUserName);\n    expect(helpers.getCurrentTime).toBe(contextHelpers.getCurrentTime);\n  });\n\n  it(\"returns empty contextHelpers when none provided\", async () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboV1Provider apiKey=\"test-api-key\">{children}</TamboV1Provider>\n    );\n\n    const { result } = renderHook(() => useTamboContextHelpers(), { wrapper });\n\n    const helpers = result.current.getContextHelpers();\n    expect(Object.keys(helpers)).toHaveLength(0);\n  });\n});\n"]}
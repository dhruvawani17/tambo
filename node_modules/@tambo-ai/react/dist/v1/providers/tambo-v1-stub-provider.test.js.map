{"version":3,"file":"tambo-v1-stub-provider.test.js","sourceRoot":"","sources":["../../../src/v1/providers/tambo-v1-stub-provider.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { renderHook } from \"@testing-library/react\";\nimport React from \"react\";\nimport { TamboV1StubProvider } from \"./tambo-v1-stub-provider\";\nimport { useTamboV1 } from \"../hooks/use-tambo-v1\";\nimport { useTamboV1ThreadInput } from \"../hooks/use-tambo-v1-thread-input\";\nimport { useTamboRegistry } from \"../../providers/tambo-registry-provider\";\nimport { useTamboClient } from \"../../providers/tambo-client-provider\";\nimport type { TamboV1Thread } from \"../types/thread\";\n\ndescribe(\"TamboV1StubProvider\", () => {\n  const mockThread: TamboV1Thread = {\n    id: \"thread_123\",\n    messages: [\n      {\n        id: \"msg_1\",\n        role: \"user\",\n        content: [{ type: \"text\", text: \"Hello\" }],\n        createdAt: \"2024-01-01T00:00:00Z\",\n      },\n      {\n        id: \"msg_2\",\n        role: \"assistant\",\n        content: [{ type: \"text\", text: \"Hi there!\" }],\n        createdAt: \"2024-01-01T00:00:01Z\",\n      },\n    ],\n    status: \"idle\",\n    createdAt: \"2024-01-01T00:00:00Z\",\n    updatedAt: \"2024-01-01T00:00:01Z\",\n  };\n\n  describe(\"useTamboV1\", () => {\n    it(\"provides thread data via useTamboV1\", () => {\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread}>\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1(\"thread_123\"), {\n        wrapper,\n      });\n\n      expect(result.current.messages).toHaveLength(2);\n      expect(result.current.messages[0].id).toBe(\"msg_1\");\n      expect(result.current.messages[1].id).toBe(\"msg_2\");\n      expect(result.current.isIdle).toBe(true);\n      expect(result.current.isStreaming).toBe(false);\n    });\n\n    it(\"returns empty messages when no thread provided\", () => {\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider>{children}</TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1(\"stub_thread\"), {\n        wrapper,\n      });\n\n      expect(result.current.messages).toHaveLength(0);\n      expect(result.current.isIdle).toBe(true);\n    });\n\n    it(\"shows streaming state when isStreaming prop is true\", () => {\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread} isStreaming>\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1(\"thread_123\"), {\n        wrapper,\n      });\n\n      expect(result.current.isStreaming).toBe(true);\n      expect(result.current.isIdle).toBe(false);\n    });\n  });\n\n  describe(\"useTamboV1ThreadInput\", () => {\n    it(\"provides thread input context\", () => {\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread}>\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1ThreadInput(), { wrapper });\n\n      expect(result.current.value).toBe(\"\");\n      expect(result.current.threadId).toBe(\"thread_123\");\n      expect(typeof result.current.setValue).toBe(\"function\");\n      expect(typeof result.current.submit).toBe(\"function\");\n    });\n\n    it(\"uses initial input value when provided\", () => {\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread} inputValue=\"Hello world\">\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1ThreadInput(), { wrapper });\n\n      expect(result.current.value).toBe(\"Hello world\");\n    });\n\n    it(\"calls custom onSubmit when provided\", async () => {\n      const mockOnSubmit = jest\n        .fn()\n        .mockResolvedValue({ threadId: \"new_thread\" });\n\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread} onSubmit={mockOnSubmit}>\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1ThreadInput(), { wrapper });\n\n      const response = await result.current.submit();\n\n      expect(mockOnSubmit).toHaveBeenCalled();\n      expect(response.threadId).toBe(\"new_thread\");\n    });\n  });\n\n  describe(\"Registry\", () => {\n    it(\"registers provided components\", () => {\n      const TestComponent = () => <div>Test</div>;\n      const components = [\n        {\n          name: \"TestComponent\",\n          description: \"A test component\",\n          component: TestComponent,\n        },\n      ];\n\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread} components={components}>\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      expect(result.current.componentList.TestComponent).toBeDefined();\n      expect(result.current.componentList.TestComponent.name).toBe(\n        \"TestComponent\",\n      );\n    });\n\n    it(\"registers provided tools\", () => {\n      const tools = [\n        {\n          name: \"testTool\",\n          description: \"A test tool\",\n          tool: async () => \"result\",\n        },\n      ];\n\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread} tools={tools as any}>\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboRegistry(), { wrapper });\n\n      expect(result.current.toolRegistry.testTool).toBeDefined();\n      expect(result.current.toolRegistry.testTool.name).toBe(\"testTool\");\n    });\n  });\n\n  describe(\"Client\", () => {\n    it(\"provides stub client\", () => {\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread}>\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboClient(), { wrapper });\n\n      expect(result.current).toBeDefined();\n    });\n  });\n\n  describe(\"Thread management\", () => {\n    it(\"provides thread management functions\", () => {\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={mockThread}>\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1(\"thread_123\"), {\n        wrapper,\n      });\n\n      expect(typeof result.current.startNewThread).toBe(\"function\");\n      expect(typeof result.current.switchThread).toBe(\"function\");\n      expect(typeof result.current.initThread).toBe(\"function\");\n    });\n\n    it(\"calls custom onStartNewThread when provided\", () => {\n      const mockStartNewThread = jest.fn().mockReturnValue(\"custom_thread_id\");\n\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider\n          thread={mockThread}\n          onStartNewThread={mockStartNewThread}\n        >\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1(\"thread_123\"), {\n        wrapper,\n      });\n\n      const newThreadId = result.current.startNewThread();\n\n      expect(mockStartNewThread).toHaveBeenCalled();\n      expect(newThreadId).toBe(\"custom_thread_id\");\n    });\n  });\n\n  describe(\"Messages-only thread\", () => {\n    it(\"accepts just messages array instead of full thread\", () => {\n      const messages = [\n        {\n          id: \"msg_1\",\n          role: \"user\" as const,\n          content: [{ type: \"text\" as const, text: \"Hello\" }],\n          createdAt: \"2024-01-01T00:00:00Z\",\n        },\n      ];\n\n      const wrapper = ({ children }: { children: React.ReactNode }) => (\n        <TamboV1StubProvider thread={{ messages }} threadId=\"custom_id\">\n          {children}\n        </TamboV1StubProvider>\n      );\n\n      const { result } = renderHook(() => useTamboV1(\"custom_id\"), { wrapper });\n\n      expect(result.current.messages).toHaveLength(1);\n      expect(result.current.messages[0].id).toBe(\"msg_1\");\n    });\n  });\n});\n"]}
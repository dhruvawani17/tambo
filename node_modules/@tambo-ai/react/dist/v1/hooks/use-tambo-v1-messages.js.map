{"version":3,"file":"use-tambo-v1-messages.js","sourceRoot":"","sources":["../../../src/v1/hooks/use-tambo-v1-messages.ts"],"names":[],"mappings":";AAAA,YAAY,CAAC;;AA0Eb,gDAgBC;AAxFD;;;;;GAKG;AAEH,iCAAgC;AAChC,kFAAsE;AAsCtE;;;;;;;;;;;;;;;;;;;;;;;;;GAyBG;AACH,SAAgB,kBAAkB,CAAC,QAAgB;IACjD,MAAM,WAAW,GAAG,IAAA,wCAAc,GAAE,CAAC;IACrC,MAAM,WAAW,GAAG,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IAEpD,OAAO,IAAA,eAAO,EAAC,GAAG,EAAE;QAClB,MAAM,QAAQ,GAAG,WAAW,EAAE,MAAM,CAAC,QAAQ,IAAI,EAAE,CAAC;QAEpD,OAAO;YACL,QAAQ;YACR,WAAW,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;YAC1C,YAAY,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC;YACvD,iBAAiB,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC;YACjE,WAAW,EAAE,QAAQ,CAAC,MAAM,GAAG,CAAC;YAChC,YAAY,EAAE,QAAQ,CAAC,MAAM;SAC9B,CAAC;IACJ,CAAC,EAAE,CAAC,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AACrC,CAAC","sourcesContent":["\"use client\";\n\n/**\n * useTamboV1Messages - Messages Hook for v1 API\n *\n * Provides access to messages in a thread with streaming state awareness.\n * Messages are accumulated from AG-UI events during streaming.\n */\n\nimport { useMemo } from \"react\";\nimport { useStreamState } from \"../providers/tambo-v1-stream-context\";\nimport type { TamboV1Message } from \"../types/message\";\n\n/**\n * Return type for useTamboV1Messages hook\n */\nexport interface UseTamboV1MessagesReturn {\n  /**\n   * All messages in the thread\n   */\n  messages: TamboV1Message[];\n\n  /**\n   * The most recent message (last in the list)\n   */\n  lastMessage: TamboV1Message | undefined;\n\n  /**\n   * User messages only\n   */\n  userMessages: TamboV1Message[];\n\n  /**\n   * Assistant messages only\n   */\n  assistantMessages: TamboV1Message[];\n\n  /**\n   * Whether there are any messages\n   */\n  hasMessages: boolean;\n\n  /**\n   * Total message count\n   */\n  messageCount: number;\n}\n\n/**\n * Hook to access messages in a thread.\n *\n * Provides filtered views of messages (user-only, assistant-only)\n * and metadata about the message list.\n * @param threadId - Thread ID to get messages for\n * @returns Message list and utilities\n * @example\n * ```tsx\n * function MessageList({ threadId }: { threadId: string }) {\n *   const { messages, hasMessages, lastMessage } = useTamboV1Messages(threadId);\n *\n *   if (!hasMessages) {\n *     return <EmptyState />;\n *   }\n *\n *   return (\n *     <div>\n *       {messages.map(msg => (\n *         <Message key={msg.id} message={msg} />\n *       ))}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useTamboV1Messages(threadId: string): UseTamboV1MessagesReturn {\n  const streamState = useStreamState();\n  const threadState = streamState.threadMap[threadId];\n\n  return useMemo(() => {\n    const messages = threadState?.thread.messages ?? [];\n\n    return {\n      messages,\n      lastMessage: messages[messages.length - 1],\n      userMessages: messages.filter((m) => m.role === \"user\"),\n      assistantMessages: messages.filter((m) => m.role === \"assistant\"),\n      hasMessages: messages.length > 0,\n      messageCount: messages.length,\n    };\n  }, [threadState?.thread.messages]);\n}\n"]}
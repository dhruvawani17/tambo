"use strict";
"use client";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useTamboV1Messages = useTamboV1Messages;
/**
 * useTamboV1Messages - Messages Hook for v1 API
 *
 * Provides access to messages in a thread with streaming state awareness.
 * Messages are accumulated from AG-UI events during streaming.
 */
const react_1 = require("react");
const tambo_v1_stream_context_1 = require("../providers/tambo-v1-stream-context");
/**
 * Hook to access messages in a thread.
 *
 * Provides filtered views of messages (user-only, assistant-only)
 * and metadata about the message list.
 * @param threadId - Thread ID to get messages for
 * @returns Message list and utilities
 * @example
 * ```tsx
 * function MessageList({ threadId }: { threadId: string }) {
 *   const { messages, hasMessages, lastMessage } = useTamboV1Messages(threadId);
 *
 *   if (!hasMessages) {
 *     return <EmptyState />;
 *   }
 *
 *   return (
 *     <div>
 *       {messages.map(msg => (
 *         <Message key={msg.id} message={msg} />
 *       ))}
 *     </div>
 *   );
 * }
 * ```
 */
function useTamboV1Messages(threadId) {
    const streamState = (0, tambo_v1_stream_context_1.useStreamState)();
    const threadState = streamState.threadMap[threadId];
    return (0, react_1.useMemo)(() => {
        const messages = threadState?.thread.messages ?? [];
        return {
            messages,
            lastMessage: messages[messages.length - 1],
            userMessages: messages.filter((m) => m.role === "user"),
            assistantMessages: messages.filter((m) => m.role === "assistant"),
            hasMessages: messages.length > 0,
            messageCount: messages.length,
        };
    }, [threadState?.thread.messages]);
}
//# sourceMappingURL=use-tambo-v1-messages.js.map
{"version":3,"file":"registry.test.js","sourceRoot":"","sources":["../../src/util/registry.test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Tests for registry utilities:\n * - getParametersFromToolSchema via mapTamboToolToContextTool\n * - convertPropsToJsonSchema\n * - getComponentFromRegistry\n * - getAvailableComponents\n * - getUnassociatedTools\n */\nimport type { JSONSchema7 } from \"json-schema\";\nimport * as z3 from \"zod/v3\";\nimport * as z4 from \"zod/v4\";\nimport {\n  ComponentRegistry,\n  RegisteredComponent,\n  TamboTool,\n  TamboToolAssociations,\n  TamboToolRegistry,\n} from \"../model/component-metadata\";\nimport { createMockTool } from \"../testing/tools\";\nimport {\n  convertPropsToJsonSchema,\n  getAvailableComponents,\n  getComponentFromRegistry,\n  getUnassociatedTools,\n  mapTamboToolToContextTool,\n} from \"./registry\";\n\ndescribe(\"getParametersFromToolSchema (via mapTamboToolToContextTool)\", () => {\n  describe(\"inputSchema interface (object schemas)\", () => {\n    describe(\"Zod 4 object schemas\", () => {\n      it(\"should extract parameters from object schema properties\", () => {\n        const tool = createMockTool({\n          inputSchema: z4.object({\n            name: z4.string().describe(\"User name\"),\n            age: z4.number().describe(\"User age\"),\n          }),\n          outputSchema: z4.boolean(),\n          maxCalls: 10,\n        });\n        const result = mapTamboToolToContextTool(tool);\n        expect(result.maxCalls).toBe(10);\n        expect(result.parameters).toHaveLength(2);\n\n        // Parameters should be extracted from object properties\n        const nameParam = result.parameters.find((p) => p.name === \"name\");\n        const ageParam = result.parameters.find((p) => p.name === \"age\");\n\n        expect(nameParam).toBeDefined();\n        expect(nameParam?.type).toBe(\"string\");\n        expect(nameParam?.description).toBe(\"User name\");\n        expect(nameParam?.isRequired).toBe(true);\n\n        expect(ageParam).toBeDefined();\n        expect(ageParam?.type).toBe(\"number\");\n        expect(ageParam?.description).toBe(\"User age\");\n        expect(ageParam?.isRequired).toBe(true);\n\n        expect(result.parameters).toMatchSnapshot();\n      });\n\n      it(\"should handle complex nested objects\", () => {\n        const tool = createMockTool({\n          inputSchema: z4.object({\n            point: z4.object({ x: z4.number(), y: z4.number() }),\n            tags: z4.array(z4.string()),\n            color: z4.enum([\"red\", \"green\", \"blue\"]),\n          }),\n          outputSchema: z4.void(),\n        });\n        const result = mapTamboToolToContextTool(tool);\n        expect(result.parameters).toHaveLength(3);\n\n        const pointParam = result.parameters.find((p) => p.name === \"point\");\n        const tagsParam = result.parameters.find((p) => p.name === \"tags\");\n        const colorParam = result.parameters.find((p) => p.name === \"color\");\n\n        expect(pointParam).toBeDefined();\n        expect(pointParam?.type).toBe(\"object\");\n\n        expect(tagsParam).toBeDefined();\n        expect(tagsParam?.type).toBe(\"array\");\n\n        expect(colorParam).toBeDefined();\n        expect(colorParam?.type).toBe(\"string\");\n\n        expect(result.parameters).toMatchSnapshot();\n      });\n    });\n\n    describe(\"Zod 3 object schemas\", () => {\n      it(\"should extract parameters from object schema properties\", () => {\n        const tool = createMockTool({\n          inputSchema: z3.object({\n            name: z3.string().describe(\"User name\"),\n            age: z3.number().describe(\"User age\"),\n          }),\n          outputSchema: z3.boolean(),\n        });\n        const result = mapTamboToolToContextTool(tool);\n        expect(result.parameters).toHaveLength(2);\n\n        const nameParam = result.parameters.find((p) => p.name === \"name\");\n        const ageParam = result.parameters.find((p) => p.name === \"age\");\n\n        expect(nameParam).toBeDefined();\n        expect(nameParam?.type).toBe(\"string\");\n        expect(nameParam?.isRequired).toBe(true);\n\n        expect(ageParam).toBeDefined();\n        expect(ageParam?.type).toBe(\"number\");\n        expect(ageParam?.isRequired).toBe(true);\n\n        expect(result.parameters).toMatchSnapshot();\n      });\n    });\n\n    describe(\"JSON Schema object schemas\", () => {\n      it(\"should extract parameters from object schema properties\", () => {\n        const schema: JSONSchema7 = {\n          type: \"object\",\n          properties: {\n            name: { type: \"string\", description: \"User name\" },\n            age: { type: \"number\", description: \"User age\" },\n          },\n          required: [\"name\"],\n          description: \"User data\",\n        };\n        const tool = createMockTool({ inputSchema: schema, outputSchema: {} });\n        const result = mapTamboToolToContextTool(tool);\n        expect(result.parameters).toHaveLength(2);\n\n        const nameParam = result.parameters.find((p) => p.name === \"name\");\n        const ageParam = result.parameters.find((p) => p.name === \"age\");\n\n        expect(nameParam).toBeDefined();\n        expect(nameParam?.type).toBe(\"string\");\n        expect(nameParam?.description).toBe(\"User name\");\n        expect(nameParam?.isRequired).toBe(true);\n\n        expect(ageParam).toBeDefined();\n        expect(ageParam?.type).toBe(\"number\");\n        expect(ageParam?.description).toBe(\"User age\");\n        expect(ageParam?.isRequired).toBe(false);\n\n        expect(result.parameters).toMatchSnapshot();\n      });\n\n      it(\"should handle empty object schema\", () => {\n        const schema: JSONSchema7 = {\n          type: \"object\",\n          properties: {},\n        };\n        const tool = createMockTool({ inputSchema: schema, outputSchema: {} });\n        const result = mapTamboToolToContextTool(tool);\n        expect(result.parameters).toHaveLength(0);\n      });\n    });\n  });\n\n  describe(\"Direct schema (shorthand for inputSchema)\", () => {\n    it(\"should accept Zod 4 object schema directly and extract parameters\", () => {\n      const tool = createMockTool(\n        z4.object({\n          name: z4.string(),\n          age: z4.number(),\n        }),\n      );\n      const result = mapTamboToolToContextTool(tool);\n      expect(result.parameters).toHaveLength(2);\n\n      const nameParam = result.parameters.find((p) => p.name === \"name\");\n      const ageParam = result.parameters.find((p) => p.name === \"age\");\n\n      expect(nameParam).toBeDefined();\n      expect(nameParam?.type).toBe(\"string\");\n\n      expect(ageParam).toBeDefined();\n      expect(ageParam?.type).toBe(\"number\");\n\n      expect(result.parameters).toMatchSnapshot();\n    });\n\n    it(\"should accept Zod 3 object schema directly and extract parameters\", () => {\n      const tool = createMockTool(\n        z3.object({\n          name: z3.string(),\n          age: z3.number(),\n        }),\n      );\n      const result = mapTamboToolToContextTool(tool);\n      expect(result.parameters).toHaveLength(2);\n\n      const nameParam = result.parameters.find((p) => p.name === \"name\");\n      const ageParam = result.parameters.find((p) => p.name === \"age\");\n\n      expect(nameParam).toBeDefined();\n      expect(ageParam).toBeDefined();\n\n      expect(result.parameters).toMatchSnapshot();\n    });\n\n    it(\"should accept JSON Schema object directly and extract parameters\", () => {\n      const schema: JSONSchema7 = {\n        type: \"object\",\n        properties: {\n          name: { type: \"string\" },\n          age: { type: \"number\" },\n        },\n      };\n      const tool = createMockTool(schema);\n      const result = mapTamboToolToContextTool(tool);\n      expect(result.parameters).toHaveLength(2);\n\n      const nameParam = result.parameters.find((p) => p.name === \"name\");\n      const ageParam = result.parameters.find((p) => p.name === \"age\");\n\n      expect(nameParam).toBeDefined();\n      expect(nameParam?.type).toBe(\"string\");\n\n      expect(ageParam).toBeDefined();\n      expect(ageParam?.type).toBe(\"number\");\n\n      expect(result.parameters).toMatchSnapshot();\n    });\n  });\n});\n\ndescribe(\"registry util: maxCalls\", () => {\n  it(\"mapTamboToolToContextTool includes maxCalls when present\", () => {\n    const tool = createMockTool({\n      inputSchema: z3.object({ q: z3.string() }),\n      maxCalls: 5,\n    });\n    const meta = mapTamboToolToContextTool(tool);\n    expect(meta.maxCalls).toBe(5);\n  });\n\n  it(\"getUnassociatedTools does not drop unassociated tools and preserves maxCalls\", () => {\n    const t1: TamboTool = {\n      name: \"a\",\n      description: \"a\",\n      tool: () => {},\n      inputSchema: {},\n      outputSchema: {},\n      maxCalls: 3,\n    };\n    const registry = { a: t1 };\n    const associations = { SomeComponent: [] as string[] };\n    const out = getUnassociatedTools(registry, associations);\n    expect(out.find((t) => t.name === \"a\")?.maxCalls).toBe(3);\n  });\n});\n\ndescribe(\"registry util: annotations\", () => {\n  it(\"mapTamboToolToContextTool includes annotations when present\", () => {\n    const tool: TamboTool = {\n      name: \"read-only-tool\",\n      description: \"A tool that can be called with partial args\",\n      tool: () => {},\n      inputSchema: z3.object({ text: z3.string() }),\n      outputSchema: z3.string(),\n      annotations: { readOnlyHint: true },\n    };\n    const meta = mapTamboToolToContextTool(tool);\n    expect(meta.annotations).toEqual({ readOnlyHint: true });\n  });\n\n  it(\"mapTamboToolToContextTool does not include annotations when undefined\", () => {\n    const tool: TamboTool = {\n      name: \"regular-tool\",\n      description: \"A regular tool\",\n      tool: () => {},\n      inputSchema: z3.object({ text: z3.string() }),\n      outputSchema: z3.string(),\n    };\n    const meta = mapTamboToolToContextTool(tool);\n    expect(meta.annotations).toBeUndefined();\n  });\n\n  it(\"mapTamboToolToContextTool includes annotations with readOnlyHint: false when explicitly set\", () => {\n    const tool: TamboTool = {\n      name: \"explicit-non-read-only-tool\",\n      description: \"A tool explicitly marked as non-read-only\",\n      tool: () => {},\n      inputSchema: z3.object({ text: z3.string() }),\n      outputSchema: z3.string(),\n      annotations: { readOnlyHint: false },\n    };\n    const meta = mapTamboToolToContextTool(tool);\n    expect(meta.annotations).toEqual({ readOnlyHint: false });\n  });\n\n  it(\"getUnassociatedTools preserves annotations\", () => {\n    const tool: TamboTool = {\n      name: \"streaming-tool\",\n      description: \"A streaming tool\",\n      tool: () => {},\n      inputSchema: {},\n      outputSchema: {},\n      annotations: { readOnlyHint: true },\n    };\n    const registry = { \"streaming-tool\": tool };\n    const associations = { SomeComponent: [] as string[] };\n    const out = getUnassociatedTools(registry, associations);\n    expect(out.find((t) => t.name === \"streaming-tool\")?.annotations).toEqual({\n      readOnlyHint: true,\n    });\n  });\n\n  it(\"mapTamboToolToContextTool includes tamboStreamableHint annotation\", () => {\n    const tool: TamboTool = {\n      name: \"streamable-tool\",\n      description: \"A tool safe to call during streaming\",\n      tool: () => {},\n      inputSchema: z3.object({ text: z3.string() }),\n      outputSchema: z3.string(),\n      annotations: { tamboStreamableHint: true },\n    };\n    const meta = mapTamboToolToContextTool(tool);\n    expect(meta.annotations).toEqual({ tamboStreamableHint: true });\n  });\n\n  it(\"mapTamboToolToContextTool preserves multiple combined annotations\", () => {\n    const tool: TamboTool = {\n      name: \"combined-annotations-tool\",\n      description: \"A tool with multiple annotations\",\n      tool: () => {},\n      inputSchema: z3.object({ text: z3.string() }),\n      outputSchema: z3.string(),\n      annotations: { readOnlyHint: true, tamboStreamableHint: true },\n    };\n    const meta = mapTamboToolToContextTool(tool);\n    expect(meta.annotations).toEqual({\n      readOnlyHint: true,\n      tamboStreamableHint: true,\n    });\n  });\n});\n\ndescribe(\"convertPropsToJsonSchema\", () => {\n  it(\"should return undefined when component has no props\", () => {\n    const component = {\n      name: \"TestComponent\",\n      description: \"A test component\",\n      component: () => null,\n      props: undefined,\n      contextTools: [],\n    } as unknown as RegisteredComponent;\n    expect(convertPropsToJsonSchema(component)).toBeUndefined();\n  });\n\n  it(\"should convert Standard Schema (Zod) props to JSON Schema\", () => {\n    const zodSchema = z4.object({\n      title: z4.string(),\n      count: z4.number(),\n    });\n    const component = {\n      name: \"TestComponent\",\n      description: \"A test component\",\n      component: () => null,\n      props: zodSchema,\n      contextTools: [],\n    } as unknown as RegisteredComponent;\n    const result = convertPropsToJsonSchema(component);\n    expect(result).toEqual(\n      expect.objectContaining({\n        type: \"object\",\n        properties: expect.objectContaining({\n          title: expect.objectContaining({ type: \"string\" }),\n          count: expect.objectContaining({ type: \"number\" }),\n        }),\n      }),\n    );\n  });\n\n  it(\"should pass through JSON Schema props as-is\", () => {\n    const jsonSchema: JSONSchema7 = {\n      type: \"object\",\n      properties: {\n        title: { type: \"string\" },\n        count: { type: \"number\" },\n      },\n    };\n    const component = {\n      name: \"TestComponent\",\n      description: \"A test component\",\n      component: () => null,\n      props: jsonSchema,\n      contextTools: [],\n    } as unknown as RegisteredComponent;\n    const result = convertPropsToJsonSchema(component);\n    expect(result).toBe(jsonSchema); // Should be the same reference\n  });\n\n  it(\"should pass through unknown format as-is\", () => {\n    const unknownFormat = { custom: \"format\", notStandard: true };\n    const component = {\n      name: \"TestComponent\",\n      description: \"A test component\",\n      component: () => null,\n      props: unknownFormat as unknown,\n      contextTools: [],\n    } as RegisteredComponent;\n    const result = convertPropsToJsonSchema(component);\n    expect(result).toBe(unknownFormat);\n  });\n});\n\ndescribe(\"getComponentFromRegistry\", () => {\n  const mockRegistry: ComponentRegistry = {\n    TestComponent: {\n      name: \"TestComponent\",\n      description: \"A test component\",\n      component: () => null,\n      props: { type: \"object\" },\n      contextTools: [],\n    },\n    AnotherComponent: {\n      name: \"AnotherComponent\",\n      description: \"Another component\",\n      component: () => null,\n      props: { type: \"object\" },\n      contextTools: [],\n    },\n  };\n\n  it(\"should return component when found in registry\", () => {\n    const result = getComponentFromRegistry(\"TestComponent\", mockRegistry);\n    expect(result.name).toBe(\"TestComponent\");\n    expect(result.description).toBe(\"A test component\");\n  });\n\n  it(\"should throw error when component not found\", () => {\n    expect(() => getComponentFromRegistry(\"NonExistent\", mockRegistry)).toThrow(\n      \"Tambo tried to use Component NonExistent, but it was not found\",\n    );\n  });\n\n  it(\"should be case-sensitive for component names\", () => {\n    expect(() =>\n      getComponentFromRegistry(\"testcomponent\", mockRegistry),\n    ).toThrow(\n      \"Tambo tried to use Component testcomponent, but it was not found\",\n    );\n  });\n});\n\ndescribe(\"getAvailableComponents\", () => {\n  const mockComponent = () => null;\n\n  const mockRegistry: ComponentRegistry = {\n    TestComponent: {\n      name: \"TestComponent\",\n      description: \"A test component\",\n      component: mockComponent,\n      props: { type: \"object\", properties: { title: { type: \"string\" } } },\n      contextTools: [],\n    },\n  };\n\n  const mockTool = createMockTool({\n    inputSchema: z4.object({ query: z4.string() }),\n    outputSchema: z4.string(),\n  });\n  mockTool.name = \"testTool\";\n\n  const mockToolRegistry: TamboToolRegistry = {\n    testTool: mockTool,\n  };\n\n  it(\"should return available components with no tools when no associations\", () => {\n    const associations: TamboToolAssociations = {};\n    const result = getAvailableComponents(\n      mockRegistry,\n      mockToolRegistry,\n      associations,\n    );\n\n    expect(result).toHaveLength(1);\n    expect(result[0].name).toBe(\"TestComponent\");\n    expect(result[0].description).toBe(\"A test component\");\n    expect(result[0].contextTools).toHaveLength(0);\n  });\n\n  it(\"should include associated tools with components\", () => {\n    const associations: TamboToolAssociations = {\n      TestComponent: [\"testTool\"],\n    };\n    const result = getAvailableComponents(\n      mockRegistry,\n      mockToolRegistry,\n      associations,\n    );\n\n    expect(result).toHaveLength(1);\n    expect(result[0].contextTools).toHaveLength(1);\n    expect(result[0].contextTools?.[0].name).toBe(\"testTool\");\n  });\n\n  it(\"should skip tools not found in registry\", () => {\n    const associations: TamboToolAssociations = {\n      TestComponent: [\"testTool\", \"nonExistentTool\"],\n    };\n    const result = getAvailableComponents(\n      mockRegistry,\n      mockToolRegistry,\n      associations,\n    );\n\n    expect(result[0].contextTools).toHaveLength(1);\n    expect(result[0].contextTools?.[0].name).toBe(\"testTool\");\n  });\n\n  it(\"should handle empty registries\", () => {\n    const result = getAvailableComponents({}, {}, {});\n    expect(result).toHaveLength(0);\n  });\n});\n\ndescribe(\"getUnassociatedTools\", () => {\n  const mockTool1 = createMockTool({\n    inputSchema: z4.object({ a: z4.string() }),\n    outputSchema: z4.void(),\n  });\n  mockTool1.name = \"tool1\";\n\n  const mockTool2 = createMockTool({\n    inputSchema: z4.object({ b: z4.string() }),\n    outputSchema: z4.void(),\n  });\n  mockTool2.name = \"tool2\";\n\n  const mockTool3 = createMockTool({\n    inputSchema: z4.object({ c: z4.string() }),\n    outputSchema: z4.void(),\n  });\n  mockTool3.name = \"tool3\";\n\n  const mockToolRegistry: TamboToolRegistry = {\n    tool1: mockTool1,\n    tool2: mockTool2,\n    tool3: mockTool3,\n  };\n\n  it(\"should return all tools when no associations exist\", () => {\n    const associations: TamboToolAssociations = {};\n    const result = getUnassociatedTools(mockToolRegistry, associations);\n\n    expect(result).toHaveLength(3);\n    expect(result.map((t) => t.name)).toEqual(\n      expect.arrayContaining([\"tool1\", \"tool2\", \"tool3\"]),\n    );\n  });\n\n  it(\"should exclude tools that are associated with components\", () => {\n    const associations: TamboToolAssociations = {\n      ComponentA: [\"tool1\"],\n      ComponentB: [\"tool2\"],\n    };\n    const result = getUnassociatedTools(mockToolRegistry, associations);\n\n    expect(result).toHaveLength(1);\n    expect(result[0].name).toBe(\"tool3\");\n  });\n\n  it(\"should return empty array when all tools are associated\", () => {\n    const associations: TamboToolAssociations = {\n      ComponentA: [\"tool1\", \"tool2\", \"tool3\"],\n    };\n    const result = getUnassociatedTools(mockToolRegistry, associations);\n\n    expect(result).toHaveLength(0);\n  });\n\n  it(\"should handle empty tool registry\", () => {\n    const result = getUnassociatedTools({}, { ComponentA: [\"tool1\"] });\n    expect(result).toHaveLength(0);\n  });\n});\n"]}
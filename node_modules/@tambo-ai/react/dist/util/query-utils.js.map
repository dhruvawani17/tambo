{"version":3,"file":"query-utils.js","sourceRoot":"","sources":["../../src/util/query-utils.ts"],"names":[],"mappings":"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","sourcesContent":["import { UseMutationResult, UseQueryResult } from \"@tanstack/react-query\";\n\nexport type CombinedMutationResult<\n  TData = unknown,\n  TError = unknown,\n  TVariables = unknown,\n  TContext = unknown,\n> = Omit<\n  UseMutationResult<TData, TError, TVariables, TContext>,\n  \"mutate\" | \"mutateAsync\" | \"reset\" | \"data\" | \"variables\" | \"context\"\n>;\n\n/**\n * Combines two mutation results, showing the \"loading state\" of the two\n * mutations. For instance, if either mutation is pending, the combined\n * mutation result will be pending.\n * @param resultA - The first mutation result\n * @param resultB - The second mutation result\n * @returns The combined mutation result\n */\nexport function combineMutationResults<TData1, TData2, TError1, TError2>(\n  resultA: UseMutationResult<TData1, TError1, any, any>,\n  resultB: UseMutationResult<TData2, TError2, any, any>,\n): CombinedMutationResult<TData1 | TData2, TError1 | TError2> {\n  let status: \"pending\" | \"error\" | \"success\" | \"idle\";\n  if (resultA.isPending || resultB.isPending) {\n    status = \"pending\";\n  } else if (resultA.isError || resultB.isError) {\n    status = \"error\";\n  } else if (resultA.isSuccess && resultB.isSuccess) {\n    status = \"success\";\n  } else {\n    status = \"idle\";\n  }\n\n  return {\n    isPending: resultA.isPending || resultB.isPending,\n    isSuccess: resultA.isSuccess && resultB.isSuccess,\n    isError: resultA.isError || resultB.isError,\n    isIdle: resultA.isIdle && resultB.isIdle,\n    isPaused: resultA.isPaused || resultB.isPaused,\n    submittedAt: resultA.submittedAt || resultB.submittedAt,\n    status,\n    error: resultA.error ?? resultB.error,\n    failureCount: resultA.failureCount + resultB.failureCount,\n    failureReason: resultA.failureReason ?? resultB.failureReason,\n  };\n}\n\nexport type CombinedQueryResult<TData1, TData2, TError1, TError2> = Omit<\n  UseQueryResult<TData1 | TData2, TError1 | TError2>,\n  \"data\" | \"refetch\" | \"promise\"\n>;\n/**\n * Combines two query results, showing the \"loading state\" of the two queries.\n * For instance, if either query is loading, the combined query result will be\n * loading.\n * @param resultA - The first query result\n * @param resultB - The second query result\n * @returns The combined query result\n */\nexport function combineQueryResults<TData1, TData2, TError1, TError2>(\n  resultA: UseQueryResult<TData1, TError1>,\n  resultB: UseQueryResult<TData2, TError2>,\n): CombinedQueryResult<void, void, TError1, TError2> {\n  let status: \"pending\" | \"error\" | \"success\";\n  if (resultA.isPending || resultB.isPending) {\n    status = \"pending\";\n  } else if (resultA.isError || resultB.isError) {\n    status = \"error\";\n  } else if (resultA.isSuccess && resultB.isSuccess) {\n    status = \"success\";\n  } else {\n    status = \"pending\";\n  }\n\n  let fetchStatus: \"fetching\" | \"paused\" | \"idle\";\n  if (resultA.isFetching || resultB.isFetching) {\n    fetchStatus = \"fetching\";\n  } else if (resultA.isPaused || resultB.isPaused) {\n    fetchStatus = \"paused\";\n  } else {\n    fetchStatus = \"idle\";\n  }\n\n  return {\n    isPending: resultA.isPending || resultB.isPending,\n    isSuccess: resultA.isSuccess && resultB.isSuccess,\n    isError: resultA.isError || resultB.isError,\n    isEnabled: resultA.isEnabled && resultB.isEnabled,\n    isLoading: resultA.isLoading || resultB.isLoading,\n    isFetched: resultA.isFetched && resultB.isFetched,\n    isFetchedAfterMount:\n      resultA.isFetchedAfterMount && resultB.isFetchedAfterMount,\n    isInitialLoading: resultA.isInitialLoading || resultB.isInitialLoading,\n    isPaused: resultA.isPaused || resultB.isPaused,\n    isLoadingError: resultA.isLoadingError || resultB.isLoadingError,\n    isRefetchError: resultA.isRefetchError || resultB.isRefetchError,\n    isPlaceholderData: resultA.isPlaceholderData || resultB.isPlaceholderData,\n    isStale: resultA.isStale || resultB.isStale,\n    isRefetching: resultA.isRefetching || resultB.isRefetching,\n    isFetching: resultA.isFetching || resultB.isFetching,\n    status,\n    error: resultA.error ?? resultB.error,\n    failureCount: resultA.failureCount + resultB.failureCount,\n    failureReason: resultA.failureReason ?? resultB.failureReason,\n    errorUpdateCount: resultA.errorUpdateCount + resultB.errorUpdateCount,\n    fetchStatus,\n    dataUpdatedAt: Math.max(resultA.dataUpdatedAt, resultB.dataUpdatedAt),\n    errorUpdatedAt: Math.max(resultA.errorUpdatedAt, resultB.errorUpdatedAt),\n  };\n}\n"]}
{"version":3,"file":"mcp-hooks.test.js","sourceRoot":"","sources":["../../src/mcp/mcp-hooks.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { render, waitFor } from \"@testing-library/react\";\nimport { QueryClient } from \"@tanstack/react-query\";\nimport React, { useEffect } from \"react\";\nimport { TamboClientContext } from \"../providers/tambo-client-provider\";\nimport { TamboMcpTokenProvider } from \"../providers/tambo-mcp-token-provider\";\nimport { TamboRegistryProvider } from \"../providers/tambo-registry-provider\";\nimport { MCPTransport } from \"./mcp-client\";\nimport { TamboMcpProvider, useTamboMcpServers } from \"./tambo-mcp-provider\";\nimport {\n  useTamboMcpPromptList,\n  useTamboMcpResourceList,\n  useTamboMcpResource,\n  isMcpResourceEntry,\n  type ListPromptEntry,\n  type ListResourceEntry,\n} from \"./mcp-hooks\";\n\n// Mock the MCP client to avoid ES module issues\nlet createImpl: jest.Mock = jest.fn();\njest.mock(\"./mcp-client\", () => ({\n  MCPClient: { create: (...args: any[]) => createImpl(...args) },\n  MCPTransport: { SSE: \"sse\", HTTP: \"http\" },\n}));\n\ndescribe(\"useTamboMcpPromptList - individual server caching\", () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    createImpl = jest.fn();\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: {\n          retry: false, // Disable retries for tests\n        },\n      },\n    });\n  });\n\n  afterEach(() => {\n    queryClient.clear();\n  });\n\n  it(\"should fetch and combine prompts from multiple servers\", async () => {\n    // Mock two servers with different prompts\n    const serverAPrompts = {\n      prompts: [\n        { name: \"prompt-a1\", description: \"Prompt A1\" },\n        { name: \"prompt-a2\", description: \"Prompt A2\" },\n      ],\n    };\n    const serverBPrompts = {\n      prompts: [\n        { name: \"prompt-b1\", description: \"Prompt B1\" },\n        { name: \"prompt-b2\", description: \"Prompt B2\" },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverAPrompts),\n      close: jest.fn(),\n    };\n    const mockClientB = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverBPrompts),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n    const clientB = {\n      client: mockClientB,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    // Mock MCPClient.create to return different clients for different URLs\n    createImpl.mockImplementation(async (url: string) => {\n      if (url === \"https://server-a.example\") return clientA;\n      if (url === \"https://server-b.example\") return clientB;\n      throw new Error(`Unexpected URL: ${url}`);\n    });\n\n    let capturedPrompts: ListPromptEntry[] = [];\n    const Capture: React.FC = () => {\n      const { data: prompts } = useTamboMcpPromptList();\n      useEffect(() => {\n        if (prompts) {\n          capturedPrompts = prompts;\n        }\n      }, [prompts]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n            {\n              url: \"https://server-b.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for all prompts to be loaded\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(4);\n    });\n\n    // Verify all prompts are present (with prefixes since we have 2 servers)\n    const promptNames = capturedPrompts.map((p) => p.prompt.name);\n    expect(promptNames).toContain(\"server-a:prompt-a1\");\n    expect(promptNames).toContain(\"server-a:prompt-a2\");\n    expect(promptNames).toContain(\"server-b:prompt-b1\");\n    expect(promptNames).toContain(\"server-b:prompt-b2\");\n\n    // Verify each prompt has the correct server info\n    const promptA1 = capturedPrompts.find(\n      (p) => p.prompt.name === \"server-a:prompt-a1\",\n    );\n    expect(promptA1?.server.url).toBe(\"https://server-a.example\");\n\n    const promptB1 = capturedPrompts.find(\n      (p) => p.prompt.name === \"server-b:prompt-b1\",\n    );\n    expect(promptB1?.server.url).toBe(\"https://server-b.example\");\n  });\n\n  it(\"should remove prompts when a server is removed\", async () => {\n    // Mock two servers with different prompts\n    const serverAPrompts = {\n      prompts: [\n        { name: \"prompt-a1\", description: \"Prompt A1\" },\n        { name: \"prompt-a2\", description: \"Prompt A2\" },\n      ],\n    };\n    const serverBPrompts = {\n      prompts: [\n        { name: \"prompt-b1\", description: \"Prompt B1\" },\n        { name: \"prompt-b2\", description: \"Prompt B2\" },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverAPrompts),\n      close: jest.fn(),\n    };\n    const mockClientB = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverBPrompts),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n    const clientB = {\n      client: mockClientB,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async (url: string) => {\n      if (url === \"https://server-a.example\") return clientA;\n      if (url === \"https://server-b.example\") return clientB;\n      throw new Error(`Unexpected URL: ${url}`);\n    });\n\n    let capturedPrompts: ListPromptEntry[] = [];\n    const Capture: React.FC = () => {\n      const { data: prompts } = useTamboMcpPromptList();\n      useEffect(() => {\n        if (prompts) {\n          capturedPrompts = prompts;\n        }\n      }, [prompts]);\n      return null;\n    };\n\n    const { rerender } = render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n            {\n              url: \"https://server-b.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for initial prompts to be loaded\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(4);\n    });\n\n    const initialPromptNames = capturedPrompts.map((p) => p.prompt.name);\n    expect(initialPromptNames).toContain(\"server-a:prompt-a1\");\n    expect(initialPromptNames).toContain(\"server-a:prompt-a2\");\n    expect(initialPromptNames).toContain(\"server-b:prompt-b1\");\n    expect(initialPromptNames).toContain(\"server-b:prompt-b2\");\n\n    // Remove server B\n    rerender(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for prompts to be updated (server B prompts should disappear)\n    // Prompts are now always prefixed (breaking change)\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(2);\n    });\n\n    const updatedPromptNames = capturedPrompts.map((p) => p.prompt.name);\n    expect(updatedPromptNames).toContain(\"server-a:prompt-a1\");\n    expect(updatedPromptNames).toContain(\"server-a:prompt-a2\");\n    expect(updatedPromptNames).not.toContain(\"prompt-b1\");\n    expect(updatedPromptNames).not.toContain(\"prompt-b2\");\n    expect(updatedPromptNames).not.toContain(\"prompt-a1\"); // Always prefixed now\n\n    // Verify server B's client was closed\n    expect(clientB.close).toHaveBeenCalled();\n  });\n\n  it(\"should cache prompts individually per server using server key\", async () => {\n    const serverAPrompts = {\n      prompts: [{ name: \"prompt-a\", description: \"Prompt A\" }],\n    };\n    const serverBPrompts = {\n      prompts: [{ name: \"prompt-b\", description: \"Prompt B\" }],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverAPrompts),\n      close: jest.fn(),\n    };\n    const mockClientB = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverBPrompts),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n    const clientB = {\n      client: mockClientB,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async (url: string) => {\n      if (url === \"https://server-a.example\") return clientA;\n      if (url === \"https://server-b.example\") return clientB;\n      throw new Error(`Unexpected URL: ${url}`);\n    });\n\n    let capturedPrompts: ListPromptEntry[] = [];\n    let capturedServerKeys: string[] = [];\n    const Capture: React.FC = () => {\n      const { data: prompts } = useTamboMcpPromptList();\n      const servers = useTamboMcpServers();\n      useEffect(() => {\n        if (prompts) {\n          capturedPrompts = prompts;\n        }\n        capturedServerKeys = servers.map((s) => s.key);\n      }, [prompts, servers]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n            {\n              url: \"https://server-b.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for prompts to be loaded\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(2);\n    });\n\n    // Verify that listPrompts was called once per server\n    expect(mockClientA.listPrompts).toHaveBeenCalledTimes(1);\n    expect(mockClientB.listPrompts).toHaveBeenCalledTimes(1);\n\n    // Verify the query cache has separate entries for each server\n    const cacheKeys = queryClient\n      .getQueryCache()\n      .getAll()\n      .map((query) => query.queryKey);\n\n    // Should have separate cache entries for each server's prompts\n    const promptCacheKeys = cacheKeys.filter(\n      (key) => Array.isArray(key) && key[0] === \"mcp-prompts\",\n    );\n    expect(promptCacheKeys.length).toBe(2);\n    // Ensure provider keys are populated before asserting\n    await waitFor(() => expect(capturedServerKeys.length).toBe(2));\n\n    // Verify each connected server key is present exactly once in the cache keys\n    const promptKeySet = new Set(promptCacheKeys.map((k) => String(k[1])));\n    // The server keys are captured from the provider to avoid relying on string substrings\n    capturedServerKeys.forEach((key) => {\n      expect(promptKeySet.has(key)).toBe(true);\n    });\n    // And no duplicates\n    expect(promptKeySet.size).toBe(capturedServerKeys.length);\n  });\n\n  it(\"should handle server errors gracefully without affecting other servers\", async () => {\n    const serverAPrompts = {\n      prompts: [{ name: \"prompt-a\", description: \"Prompt A\" }],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverAPrompts),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    // Server B will fail to connect\n    createImpl.mockImplementation(async (url: string) => {\n      if (url === \"https://server-a.example\") return clientA;\n      if (url === \"https://server-b.example\") {\n        throw new Error(\"Connection failed\");\n      }\n      throw new Error(`Unexpected URL: ${url}`);\n    });\n\n    let capturedPrompts: ListPromptEntry[] = [];\n    let mcpServersCount = 0;\n    const Capture: React.FC = () => {\n      const { data: prompts } = useTamboMcpPromptList();\n      const servers = useTamboMcpServers();\n      useEffect(() => {\n        if (prompts) {\n          capturedPrompts = prompts;\n        }\n        mcpServersCount = servers.length;\n      }, [prompts, servers]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n            {\n              url: \"https://server-b.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for server A prompts to be loaded\n    // Server B should fail but not block server A\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(1);\n      expect(mcpServersCount).toBe(2); // Both servers should be in the list\n    });\n\n    // Verify only server A's prompts are present (with prefix since 2 servers configured)\n    const promptNames = capturedPrompts.map((p) => p.prompt.name);\n    expect(promptNames).toContain(\"server-a:prompt-a\");\n    expect(promptNames).not.toContain(\"server-b:prompt-b\");\n  });\n\n  it(\"should add prompts when a new server is added\", async () => {\n    const serverAPrompts = {\n      prompts: [{ name: \"prompt-a\", description: \"Prompt A\" }],\n    };\n    const serverBPrompts = {\n      prompts: [{ name: \"prompt-b\", description: \"Prompt B\" }],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverAPrompts),\n      close: jest.fn(),\n    };\n    const mockClientB = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverBPrompts),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n    const clientB = {\n      client: mockClientB,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async (url: string) => {\n      if (url === \"https://server-a.example\") return clientA;\n      if (url === \"https://server-b.example\") return clientB;\n      throw new Error(`Unexpected URL: ${url}`);\n    });\n\n    let capturedPrompts: ListPromptEntry[] = [];\n    const Capture: React.FC = () => {\n      const { data: prompts } = useTamboMcpPromptList();\n      useEffect(() => {\n        if (prompts) {\n          capturedPrompts = prompts;\n        }\n      }, [prompts]);\n      return null;\n    };\n\n    const { rerender } = render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for initial prompts from server A (always prefixed)\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(1);\n    });\n\n    expect(capturedPrompts.map((p) => p.prompt.name)).toContain(\n      \"server-a:prompt-a\",\n    );\n\n    // Add server B\n    rerender(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n            {\n              url: \"https://server-b.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for server B prompts to be added\n    // Now with 2 servers, prompts should be prefixed\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(2);\n    });\n\n    const promptNames = capturedPrompts.map((p) => p.prompt.name);\n    expect(promptNames).toContain(\"server-a:prompt-a\");\n    expect(promptNames).toContain(\"server-b:prompt-b\");\n  });\n});\n\ndescribe(\"useTamboMcpPromptList - search filtering\", () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    createImpl = jest.fn();\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: {\n          retry: false,\n        },\n      },\n    });\n  });\n\n  afterEach(() => {\n    queryClient.clear();\n  });\n\n  it(\"should filter MCP prompts locally by search string\", async () => {\n    const serverAPrompts = {\n      prompts: [\n        { name: \"create-issue\", description: \"Create a new issue\" },\n        { name: \"list-tasks\", description: \"List all tasks\" },\n        { name: \"search-docs\", description: \"Search documentation\" },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverAPrompts),\n      listResources: jest.fn().mockResolvedValue({ resources: [] }),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async () => clientA);\n\n    let capturedPrompts: ListPromptEntry[] = [];\n    const Capture: React.FC<{ search?: string }> = ({ search }) => {\n      const { data: prompts } = useTamboMcpPromptList(search);\n      useEffect(() => {\n        if (prompts) {\n          capturedPrompts = prompts;\n        }\n      }, [prompts]);\n      return null;\n    };\n\n    const { rerender } = render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for all prompts to be loaded (no search)\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(3);\n    });\n\n    // Now search for \"issue\"\n    rerender(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture search=\"issue\" />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Should only have the create-issue prompt\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(1);\n    });\n\n    expect(capturedPrompts[0].prompt.name).toBe(\"server-a:create-issue\");\n\n    // MCP listPrompts should only be called once (not re-fetched on search change)\n    expect(mockClientA.listPrompts).toHaveBeenCalledTimes(1);\n  });\n\n  it(\"should filter prompts case-insensitively\", async () => {\n    const serverAPrompts = {\n      prompts: [\n        { name: \"Create-Issue\", description: \"Create a new issue\" },\n        { name: \"list-tasks\", description: \"List all tasks\" },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue(serverAPrompts),\n      listResources: jest.fn().mockResolvedValue({ resources: [] }),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async () => clientA);\n\n    let capturedPrompts: ListPromptEntry[] = [];\n    const Capture: React.FC<{ search?: string }> = ({ search }) => {\n      const { data: prompts } = useTamboMcpPromptList(search);\n      useEffect(() => {\n        if (prompts) {\n          capturedPrompts = prompts;\n        }\n      }, [prompts]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture search=\"CREATE\" />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Should find \"Create-Issue\" even though search is uppercase\n    await waitFor(() => {\n      expect(capturedPrompts.length).toBe(1);\n    });\n\n    expect(capturedPrompts[0].prompt.name).toBe(\"server-a:Create-Issue\");\n  });\n});\n\ndescribe(\"useTamboMcpResourceList - resource management\", () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    createImpl = jest.fn();\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: {\n          retry: false,\n        },\n      },\n    });\n  });\n\n  afterEach(() => {\n    queryClient.clear();\n  });\n\n  it(\"should identify MCP-backed entries with isMcpResourceEntry\", () => {\n    const registryEntry: ListResourceEntry = {\n      server: null,\n      // Resource shape is not important for this helper, so cast to keep the\n      // test focused on the discriminant field.\n      resource: {\n        uri: \"file:///registry/doc.txt\",\n        name: \"Registry Doc\",\n        mimeType: \"text/plain\",\n      } as any,\n    };\n\n    const mcpEntry: ListResourceEntry = {\n      server: { key: \"server-a\", client: {} } as any,\n      resource: {\n        uri: \"server-a:file:///home/user/doc.txt\",\n        name: \"Document\",\n        mimeType: \"text/plain\",\n      } as any,\n    };\n\n    expect(isMcpResourceEntry(mcpEntry)).toBe(true);\n    expect(isMcpResourceEntry(registryEntry)).toBe(false);\n  });\n\n  it(\"should fetch and combine resources from multiple servers\", async () => {\n    // Mock two servers with different resources\n    const serverAResources = {\n      resources: [\n        {\n          uri: \"file:///home/user/doc1.txt\",\n          name: \"Document 1\",\n          mimeType: \"text/plain\",\n        },\n        {\n          uri: \"file:///home/user/doc2.txt\",\n          name: \"Document 2\",\n          mimeType: \"text/plain\",\n        },\n      ],\n    };\n    const serverBResources = {\n      resources: [\n        {\n          uri: \"file:///workspace/code.js\",\n          name: \"Code File\",\n          mimeType: \"text/javascript\",\n        },\n        {\n          uri: \"file:///workspace/README.md\",\n          name: \"Readme\",\n          mimeType: \"text/markdown\",\n        },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverAResources),\n      close: jest.fn(),\n    };\n    const mockClientB = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverBResources),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n    const clientB = {\n      client: mockClientB,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async (url: string) => {\n      if (url === \"https://server-a.example\") return clientA;\n      if (url === \"https://server-b.example\") return clientB;\n      throw new Error(`Unexpected URL: ${url}`);\n    });\n\n    let capturedResources: ListResourceEntry[] = [];\n    const Capture: React.FC = () => {\n      const { data: resources } = useTamboMcpResourceList();\n      useEffect(() => {\n        if (resources) {\n          capturedResources = resources;\n        }\n      }, [resources]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n            {\n              url: \"https://server-b.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for all resources to be loaded\n    await waitFor(() => {\n      expect(capturedResources.length).toBe(4);\n    });\n\n    // Verify all resources are present (with prefixes since we have 2 servers)\n    const resourceUris = capturedResources.map((r) => r.resource.uri);\n    expect(resourceUris).toContain(\"server-a:file:///home/user/doc1.txt\");\n    expect(resourceUris).toContain(\"server-a:file:///home/user/doc2.txt\");\n    expect(resourceUris).toContain(\"server-b:file:///workspace/code.js\");\n    expect(resourceUris).toContain(\"server-b:file:///workspace/README.md\");\n\n    // Verify each resource has the correct server info\n    const resource1 = capturedResources.find(\n      (r) => r.resource.uri === \"server-a:file:///home/user/doc1.txt\",\n    );\n    expect(resource1).toBeDefined();\n    expect(resource1!.server).not.toBeNull();\n    expect(resource1!.server!.url).toBe(\"https://server-a.example\");\n\n    const resource2 = capturedResources.find(\n      (r) => r.resource.uri === \"server-b:file:///workspace/code.js\",\n    );\n    expect(resource2).toBeDefined();\n    expect(resource2!.server).not.toBeNull();\n    expect(resource2!.server!.url).toBe(\"https://server-b.example\");\n  });\n\n  it(\"should always prefix MCP resources even with single server\", async () => {\n    const serverAResources = {\n      resources: [\n        {\n          uri: \"file:///home/user/doc.txt\",\n          name: \"Document\",\n          mimeType: \"text/plain\",\n        },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverAResources),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async () => clientA);\n\n    let capturedResources: ListResourceEntry[] = [];\n    const Capture: React.FC = () => {\n      const { data: resources } = useTamboMcpResourceList();\n      useEffect(() => {\n        if (resources) {\n          capturedResources = resources;\n        }\n      }, [resources]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    await waitFor(() => {\n      expect(capturedResources.length).toBe(1);\n    });\n\n    // Always prefix MCP resources, even with 1 server (breaking change)\n    expect(capturedResources[0].resource.uri).toBe(\n      \"server-a:file:///home/user/doc.txt\",\n    );\n  });\n\n  it(\"should maintain prefixes even when servers are removed\", async () => {\n    const serverAResources = {\n      resources: [\n        {\n          uri: \"file:///home/user/doc1.txt\",\n          name: \"Document 1\",\n          mimeType: \"text/plain\",\n        },\n        {\n          uri: \"file:///home/user/doc2.txt\",\n          name: \"Document 2\",\n          mimeType: \"text/plain\",\n        },\n      ],\n    };\n    const serverBResources = {\n      resources: [\n        {\n          uri: \"file:///workspace/code.js\",\n          name: \"Code File\",\n          mimeType: \"text/javascript\",\n        },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverAResources),\n      close: jest.fn(),\n    };\n    const mockClientB = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverBResources),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n    const clientB = {\n      client: mockClientB,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async (url: string) => {\n      if (url === \"https://server-a.example\") return clientA;\n      if (url === \"https://server-b.example\") return clientB;\n      throw new Error(`Unexpected URL: ${url}`);\n    });\n\n    let capturedResources: ListResourceEntry[] = [];\n    const Capture: React.FC = () => {\n      const { data: resources } = useTamboMcpResourceList();\n      useEffect(() => {\n        if (resources) {\n          capturedResources = resources;\n        }\n      }, [resources]);\n      return null;\n    };\n\n    const { rerender } = render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n            {\n              url: \"https://server-b.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for all resources to be loaded (prefixed)\n    await waitFor(() => {\n      expect(capturedResources.length).toBe(3);\n    });\n\n    const initialUris = capturedResources.map((r) => r.resource.uri);\n    expect(initialUris).toContain(\"server-a:file:///home/user/doc1.txt\");\n    expect(initialUris).toContain(\"server-b:file:///workspace/code.js\");\n\n    // Now remove server B\n    rerender(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for server B resources to be removed (prefixes maintained)\n    await waitFor(() => {\n      expect(capturedResources.length).toBe(2);\n    });\n\n    const updatedUris = capturedResources.map((r) => r.resource.uri);\n    // Prefixes are maintained even with only 1 server (breaking change)\n    expect(updatedUris).toContain(\"server-a:file:///home/user/doc1.txt\");\n    expect(updatedUris).toContain(\"server-a:file:///home/user/doc2.txt\");\n    expect(updatedUris).not.toContain(\"file:///home/user/doc1.txt\"); // Always prefixed now\n    expect(updatedUris).not.toContain(\"server-b:file:///workspace/code.js\"); // Server B removed\n  });\n});\n\ndescribe(\"useTamboMcpResourceList - search filtering\", () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    createImpl = jest.fn();\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: {\n          retry: false,\n        },\n      },\n    });\n  });\n\n  afterEach(() => {\n    queryClient.clear();\n  });\n\n  it(\"should filter MCP resources locally by search string\", async () => {\n    const serverAResources = {\n      resources: [\n        {\n          uri: \"file:///home/user/document.txt\",\n          name: \"My Document\",\n          mimeType: \"text/plain\",\n        },\n        {\n          uri: \"file:///home/user/image.png\",\n          name: \"My Image\",\n          mimeType: \"image/png\",\n        },\n        {\n          uri: \"file:///home/user/notes.txt\",\n          name: \"Notes\",\n          mimeType: \"text/plain\",\n        },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverAResources),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async () => clientA);\n\n    let capturedResources: ListResourceEntry[] = [];\n    const Capture: React.FC<{ search?: string }> = ({ search }) => {\n      const { data: resources } = useTamboMcpResourceList(search);\n      useEffect(() => {\n        if (resources) {\n          capturedResources = resources;\n        }\n      }, [resources]);\n      return null;\n    };\n\n    const { rerender } = render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for all resources to be loaded (no search)\n    await waitFor(() => {\n      expect(capturedResources.length).toBe(3);\n    });\n\n    // Now search for \"document\"\n    rerender(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture search=\"document\" />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Should only have the document resource\n    await waitFor(() => {\n      expect(capturedResources.length).toBe(1);\n    });\n\n    expect(capturedResources[0].resource.name).toBe(\"My Document\");\n\n    // MCP listResources should only be called once (not re-fetched on search change)\n    expect(mockClientA.listResources).toHaveBeenCalledTimes(1);\n  });\n\n  it(\"should pass search string to registry listResources for dynamic generation\", async () => {\n    const listResources = jest\n      .fn()\n      .mockImplementation(async (search?: string) => {\n        // Dynamically generate resources based on search\n        if (!search) return [];\n        return [\n          {\n            uri: `dynamic://${search}`,\n            name: `Dynamic Resource for ${search}`,\n            mimeType: \"text/plain\",\n          },\n        ];\n      });\n    const getResource = jest.fn().mockResolvedValue({\n      contents: [{ uri: \"test\", text: \"test content\", mimeType: \"text/plain\" }],\n    });\n\n    let capturedResources: ListResourceEntry[] = [];\n    const Capture: React.FC<{ search?: string }> = ({ search }) => {\n      const { data: resources } = useTamboMcpResourceList(search);\n      useEffect(() => {\n        if (resources) {\n          capturedResources = resources;\n        }\n      }, [resources]);\n      return null;\n    };\n\n    const { rerender } = render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          listResources={listResources}\n          getResource={getResource}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture search=\"foo\" />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for dynamic resource to be generated\n    await waitFor(() => {\n      expect(capturedResources.length).toBe(1);\n    });\n\n    // Verify listResources was called with the search string\n    expect(listResources).toHaveBeenCalledWith(\"foo\");\n    expect(capturedResources[0].resource.name).toBe(\"Dynamic Resource for foo\");\n    // Registry resources get the \"registry:\" prefix\n    expect(capturedResources[0].resource.uri).toBe(\"registry:dynamic://foo\");\n\n    // Now search for \"bar\"\n    rerender(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          listResources={listResources}\n          getResource={getResource}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture search=\"bar\" />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for new dynamic resource\n    await waitFor(() => {\n      expect(capturedResources[0].resource.uri).toBe(\"registry:dynamic://bar\");\n    });\n\n    // listResources should be called again with new search\n    expect(listResources).toHaveBeenCalledWith(\"bar\");\n    expect(capturedResources[0].resource.name).toBe(\"Dynamic Resource for bar\");\n  });\n\n  it(\"should not locally substring-filter dynamic registry resources\", async () => {\n    const listResources = jest\n      .fn()\n      .mockImplementation(async (search?: string) => {\n        if (!search) return [];\n        // Simulate a provider that matches resources using non-substring logic.\n        return [\n          {\n            uri: \"dynamic://matched-by-provider\",\n            name: \"Smart Match\",\n            mimeType: \"text/plain\",\n          },\n        ];\n      });\n    const getResource = jest.fn().mockResolvedValue({\n      contents: [{ uri: \"test\", text: \"test content\", mimeType: \"text/plain\" }],\n    });\n\n    let capturedResources: ListResourceEntry[] = [];\n    const Capture: React.FC<{ search?: string }> = ({ search }) => {\n      const { data: resources } = useTamboMcpResourceList(search);\n      useEffect(() => {\n        if (resources) {\n          capturedResources = resources;\n        }\n      }, [resources]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          listResources={listResources}\n          getResource={getResource}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture search=\"foo\" />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    await waitFor(() => {\n      expect(capturedResources.length).toBe(1);\n    });\n\n    expect(listResources).toHaveBeenCalledWith(\"foo\");\n    expect(capturedResources[0].server).toBeNull();\n    expect(capturedResources[0].resource.name).toBe(\"Smart Match\");\n    expect(capturedResources[0].resource.uri).toBe(\n      \"registry:dynamic://matched-by-provider\",\n    );\n  });\n\n  it(\"should combine MCP filtered resources with dynamically generated registry resources\", async () => {\n    const serverAResources = {\n      resources: [\n        {\n          uri: \"file:///apple.txt\",\n          name: \"Apple\",\n          mimeType: \"text/plain\",\n        },\n        {\n          uri: \"file:///banana.txt\",\n          name: \"Banana\",\n          mimeType: \"text/plain\",\n        },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverAResources),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async () => clientA);\n\n    const listResources = jest\n      .fn()\n      .mockImplementation(async (search?: string) => {\n        // Always return a resource that includes the search term\n        return [\n          {\n            uri: `registry://${search ?? \"all\"}`,\n            name: `Registry ${search ?? \"all\"}`,\n            mimeType: \"text/plain\",\n          },\n        ];\n      });\n    const getResource = jest.fn().mockResolvedValue({\n      contents: [{ uri: \"test\", text: \"test\", mimeType: \"text/plain\" }],\n    });\n\n    let capturedResources: ListResourceEntry[] = [];\n    const Capture: React.FC<{ search?: string }> = ({ search }) => {\n      const { data: resources } = useTamboMcpResourceList(search);\n      useEffect(() => {\n        if (resources) {\n          capturedResources = resources;\n        }\n      }, [resources]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n          listResources={listResources}\n          getResource={getResource}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture search=\"apple\" />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    // Wait for resources\n    await waitFor(() => {\n      // Should have: 1 MCP resource (Apple filtered) + 1 registry resource (dynamic)\n      expect(capturedResources.length).toBe(2);\n    });\n\n    const uris = capturedResources.map((r) => r.resource.uri);\n    // MCP \"Apple\" should match (filtered locally)\n    expect(uris).toContain(\"server-a:file:///apple.txt\");\n    // Registry dynamic resource\n    expect(uris).toContain(\"registry:registry://apple\");\n    // MCP \"Banana\" should NOT be included (filtered out)\n    expect(uris).not.toContain(\"server-a:file:///banana.txt\");\n  });\n});\n\ndescribe(\"useTamboMcpResource - read individual resource\", () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    createImpl = jest.fn();\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: {\n          retry: false,\n        },\n      },\n    });\n  });\n\n  afterEach(() => {\n    queryClient.clear();\n  });\n\n  it(\"should read a resource from a single server (prefixed)\", async () => {\n    const serverAResources = {\n      resources: [\n        {\n          uri: \"file:///home/user/doc.txt\",\n          name: \"Document\",\n          mimeType: \"text/plain\",\n        },\n      ],\n    };\n\n    const resourceContents = {\n      contents: [\n        {\n          uri: \"file:///home/user/doc.txt\",\n          mimeType: \"text/plain\",\n          text: \"Hello, world!\",\n        },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverAResources),\n      readResource: jest.fn().mockResolvedValue(resourceContents),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async () => clientA);\n\n    let capturedResourceData: any = null;\n    const Capture: React.FC = () => {\n      // MCP resources are always prefixed, even with single server\n      const { data: resourceData } = useTamboMcpResource(\n        \"server-a:file:///home/user/doc.txt\",\n      );\n      useEffect(() => {\n        if (resourceData) {\n          capturedResourceData = resourceData;\n        }\n      }, [resourceData]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    await waitFor(() => {\n      expect(capturedResourceData).not.toBeNull();\n    });\n\n    expect(capturedResourceData.contents[0].text).toBe(\"Hello, world!\");\n    expect(mockClientA.readResource).toHaveBeenCalledWith({\n      uri: \"file:///home/user/doc.txt\",\n    });\n  });\n\n  it(\"should read a resource from multiple servers (prefixed)\", async () => {\n    const serverAResources = {\n      resources: [\n        {\n          uri: \"file:///home/user/doc.txt\",\n          name: \"Document\",\n          mimeType: \"text/plain\",\n        },\n      ],\n    };\n    const serverBResources = {\n      resources: [\n        {\n          uri: \"file:///workspace/code.js\",\n          name: \"Code\",\n          mimeType: \"text/javascript\",\n        },\n      ],\n    };\n\n    const resourceContentsA = {\n      contents: [\n        {\n          uri: \"file:///home/user/doc.txt\",\n          mimeType: \"text/plain\",\n          text: \"From server A\",\n        },\n      ],\n    };\n\n    const mockClientA = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverAResources),\n      readResource: jest.fn().mockResolvedValue(resourceContentsA),\n      close: jest.fn(),\n    };\n\n    const mockClientB = {\n      listTools: jest.fn().mockResolvedValue([]),\n      listPrompts: jest.fn().mockResolvedValue({ prompts: [] }),\n      listResources: jest.fn().mockResolvedValue(serverBResources),\n      close: jest.fn(),\n    };\n\n    const clientA = {\n      client: mockClientA,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n    const clientB = {\n      client: mockClientB,\n      listTools: jest.fn().mockResolvedValue([]),\n      close: jest.fn(),\n    };\n\n    createImpl.mockImplementation(async (url: string) => {\n      if (url === \"https://server-a.example\") return clientA;\n      if (url === \"https://server-b.example\") return clientB;\n      throw new Error(`Unexpected URL: ${url}`);\n    });\n\n    let capturedResourceData: any = null;\n    const Capture: React.FC = () => {\n      // Request with prefix\n      const { data: resourceData } = useTamboMcpResource(\n        \"server-a:file:///home/user/doc.txt\",\n      );\n      useEffect(() => {\n        if (resourceData) {\n          capturedResourceData = resourceData;\n        }\n      }, [resourceData]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          mcpServers={[\n            {\n              url: \"https://server-a.example\",\n              transport: MCPTransport.SSE,\n            },\n            {\n              url: \"https://server-b.example\",\n              transport: MCPTransport.SSE,\n            },\n          ]}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    await waitFor(() => {\n      expect(capturedResourceData).not.toBeNull();\n    });\n\n    expect(capturedResourceData.contents[0].text).toBe(\"From server A\");\n    // Verify the prefix was stripped before calling the server\n    expect(mockClientA.readResource).toHaveBeenCalledWith({\n      uri: \"file:///home/user/doc.txt\",\n    });\n  });\n\n  it(\"should read registry resources via resourceSource with registry prefix\", async () => {\n    const originalUri = \"file:///local/registry-doc.txt\";\n    const prefixedUri = `registry:${originalUri}`;\n\n    const listResources = jest.fn().mockResolvedValue([]);\n    const getResource = jest.fn().mockResolvedValue({\n      contents: [\n        {\n          uri: originalUri,\n          mimeType: \"text/plain\",\n          text: \"Registry content\",\n        },\n      ],\n    });\n\n    let capturedResourceData: any = null;\n    const Capture: React.FC = () => {\n      // Request with registry: prefix\n      const { data: resourceData } = useTamboMcpResource(prefixedUri);\n      useEffect(() => {\n        if (resourceData) {\n          capturedResourceData = resourceData;\n        }\n      }, [resourceData]);\n      return null;\n    };\n\n    render(\n      <TamboClientContext.Provider\n        value={{\n          client: { baseURL: \"https://api.tambo.co\" } as any,\n          queryClient,\n          isUpdatingToken: false,\n        }}\n      >\n        <TamboRegistryProvider\n          listResources={listResources}\n          getResource={getResource}\n        >\n          <TamboMcpTokenProvider>\n            <TamboMcpProvider>\n              <Capture />\n            </TamboMcpProvider>\n          </TamboMcpTokenProvider>\n        </TamboRegistryProvider>\n      </TamboClientContext.Provider>,\n    );\n\n    await waitFor(() => {\n      expect(capturedResourceData).not.toBeNull();\n    });\n\n    // getResource should be called with the original URI (prefix stripped)\n    expect(getResource).toHaveBeenCalledWith(originalUri);\n    expect(capturedResourceData.contents[0].text).toBe(\"Registry content\");\n  });\n});\n"]}
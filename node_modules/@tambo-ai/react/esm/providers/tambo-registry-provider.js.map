{"version":3,"file":"tambo-registry-provider.js","sourceRoot":"","sources":["../../src/providers/tambo-registry-provider.tsx"],"names":[],"mappings":"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","sourcesContent":["\"use client\";\nimport type TamboAI from \"@tambo-ai/typescript-sdk\";\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport type {\n  ComponentRegistry,\n  RegisterToolFn,\n  RegisterToolsFn,\n  TamboComponent,\n  TamboTool,\n  TamboToolRegistry,\n} from \"../model/component-metadata\";\nimport type {\n  McpServerInfo,\n  NormalizedMcpServerInfo,\n} from \"../model/mcp-server-info\";\nimport type { ListResourceItem, ResourceSource } from \"../model/resource-info\";\nimport {\n  deduplicateMcpServers,\n  normalizeServerInfo,\n} from \"../util/mcp-server-utils\";\nimport {\n  validateAndPrepareComponent,\n  validateTool,\n  validateToolAssociation,\n} from \"../util/registry-validators\";\nimport {\n  validateResource,\n  validateResourceSource,\n} from \"../util/resource-validators\";\n\nexport interface TamboRegistryContext {\n  componentList: ComponentRegistry;\n  toolRegistry: TamboToolRegistry;\n  componentToolAssociations: Record<string, string[]>;\n  mcpServerInfos: NormalizedMcpServerInfo[];\n  resources: ListResourceItem[];\n  resourceSource: ResourceSource | null;\n  registerComponent: (\n    options: TamboComponent,\n    warnOnOverwrite?: boolean,\n  ) => void;\n  registerTool: RegisterToolFn;\n  registerTools: RegisterToolsFn;\n  addToolAssociation: (componentName: string, tool: TamboTool) => void;\n  registerMcpServer: (info: McpServerInfo) => void;\n  registerMcpServers: (infos: McpServerInfo[]) => void;\n  registerResource: (resource: ListResourceItem) => void;\n  registerResources: (resources: ListResourceItem[]) => void;\n  registerResourceSource: (source: ResourceSource) => void;\n  onCallUnregisteredTool?: (\n    toolName: string,\n    args: TamboAI.ToolCallParameter[],\n  ) => Promise<string>;\n}\n\nexport const TamboRegistryContext = createContext<TamboRegistryContext>({\n  componentList: {},\n  toolRegistry: {},\n  componentToolAssociations: {},\n  mcpServerInfos: [],\n  resources: [],\n  resourceSource: null,\n  /**\n   *\n   */\n  registerComponent: () => {},\n  /**\n   *\n   */\n  registerTool: () => {},\n  /**\n   *\n   */\n  registerTools: () => {},\n  /**\n   *\n   */\n  addToolAssociation: () => {},\n  /**\n   *\n   */\n  registerMcpServer: () => {},\n  /**\n   *\n   */\n  registerMcpServers: () => {},\n  /**\n   *\n   */\n  registerResource: () => {},\n  /**\n   *\n   */\n  registerResources: () => {},\n  /**\n   *\n   */\n  registerResourceSource: () => {},\n});\n\nexport interface TamboRegistryProviderProps {\n  /** The components to register */\n  components?: TamboComponent[];\n  /** The tools to register */\n  tools?: TamboTool[];\n  /** The MCP servers to register */\n  mcpServers?: (McpServerInfo | string)[];\n  /** The static resources to register */\n  resources?: ListResourceItem[];\n\n  /**\n   * Dynamic resource search function. Must be paired with getResource.\n   * Called when useTamboMcpResourceList() is used to fetch resources.\n   */\n  listResources?: ResourceSource[\"listResources\"];\n\n  /**\n   * Dynamic resource fetch function. Must be paired with listResources.\n   * Called when useTamboMcpResource() is used to fetch a specific resource.\n   */\n  getResource?: ResourceSource[\"getResource\"];\n\n  /**\n   * A function to call when an unknown tool is called. If this function is not\n   * provided, an error will be thrown when a tool call is requested by the\n   * server.\n   *\n   * Note that this is generally only for agents, where the agent code may\n   * request tool calls that are not registered in the tool registry.\n   */\n  onCallUnregisteredTool?: (\n    toolName: string,\n    args: TamboAI.ToolCallParameter[],\n  ) => Promise<string>;\n}\n\n/**\n * The TamboRegistryProvider is a React provider that provides a component\n * registry to the descendants of the provider.\n * @param props - The props for the TamboRegistryProvider\n * @param props.children - The children to wrap\n * @param props.components - The components to register\n * @param props.tools - The tools to register\n * @param props.mcpServers - The MCP servers to register\n * @param props.resources - The static resources to register\n * @param props.listResources - The dynamic resource search function (must be paired with getResource)\n * @param props.getResource - The dynamic resource fetch function (must be paired with listResources)\n * @param props.onCallUnregisteredTool - The function to call when an unknown tool is called (optional)\n * @returns The TamboRegistryProvider component\n */\nexport const TamboRegistryProvider: React.FC<\n  PropsWithChildren<TamboRegistryProviderProps>\n> = ({\n  children,\n  components: userComponents,\n  tools: userTools,\n  mcpServers: userMcpServers,\n  resources: userResources,\n  listResources: userListResources,\n  getResource: userGetResource,\n  onCallUnregisteredTool,\n}) => {\n  const [componentList, setComponentList] = useState<ComponentRegistry>({});\n  const [toolRegistry, setToolRegistry] = useState<TamboToolRegistry>({});\n  const [componentToolAssociations, setComponentToolAssociations] = useState<\n    Record<string, string[]>\n  >({});\n  const [staticMcpServerInfos, setStaticMcpServerInfos] = useState<\n    NormalizedMcpServerInfo[]\n  >([]);\n  const [dynamicMcpServerInfos, setDynamicMcpServerInfos] = useState<\n    NormalizedMcpServerInfo[]\n  >([]);\n  const [staticResources, setStaticResources] = useState<ListResourceItem[]>(\n    [],\n  );\n  const [resourceSource, setResourceSource] = useState<ResourceSource | null>(\n    null,\n  );\n\n  const registryWithTool = useCallback((warnOnOverwrite: boolean) => {\n    return (registry: TamboToolRegistry, tool: unknown): TamboToolRegistry => {\n      validateTool(tool);\n\n      if (registry[tool.name] && warnOnOverwrite) {\n        console.warn(`Overwriting tool ${tool.name}`);\n      }\n\n      return {\n        ...registry,\n        [tool.name]: tool,\n      };\n    };\n  }, []);\n\n  const registerTool = useCallback<RegisterToolFn>(\n    (tool: unknown, warnOnOverwrite = true) => {\n      setToolRegistry((registry) =>\n        registryWithTool(warnOnOverwrite)(registry, tool),\n      );\n    },\n    [registryWithTool],\n  );\n\n  const registerTools = useCallback<RegisterToolsFn>(\n    (tools, warnOnOverwrite = true) => {\n      setToolRegistry((existingRegistry) =>\n        tools.reduce(registryWithTool(warnOnOverwrite), existingRegistry),\n      );\n    },\n    [registryWithTool],\n  );\n\n  const registerMcpServer = useCallback((info: McpServerInfo | string) => {\n    const normalized = normalizeServerInfo(info);\n    setDynamicMcpServerInfos((prev) => [...prev, normalized]);\n  }, []);\n\n  const registerMcpServers = useCallback(\n    (infos: (McpServerInfo | string)[]) => {\n      const normalized = infos.map(normalizeServerInfo);\n      setDynamicMcpServerInfos((prev) => [...prev, ...normalized]);\n    },\n    [],\n  );\n\n  const addToolAssociation = useCallback(\n    (componentName: string, tool: TamboTool) => {\n      validateToolAssociation(\n        componentName,\n        tool.name,\n        !!componentList[componentName],\n        !!toolRegistry[tool.name],\n      );\n\n      setComponentToolAssociations((prev) => ({\n        ...prev,\n        [componentName]: [...(prev[componentName] || []), tool.name],\n      }));\n    },\n    [componentList, toolRegistry],\n  );\n\n  const registerComponent = useCallback(\n    (options: TamboComponent, warnOnOverwrite = true) => {\n      const {\n        name,\n        description,\n        component,\n        loadingComponent,\n        associatedTools,\n      } = options;\n\n      const { props } = validateAndPrepareComponent(options);\n\n      setComponentList((prev) => {\n        if (prev[name] && warnOnOverwrite) {\n          console.warn(`overwriting component ${name}`);\n        }\n        return {\n          ...prev,\n          [name]: {\n            component,\n            loadingComponent,\n            name,\n            description,\n            props,\n            contextTools: [],\n          },\n        };\n      });\n      if (associatedTools) {\n        registerTools(associatedTools);\n        setComponentToolAssociations((prev) => ({\n          ...prev,\n          [name]: associatedTools.map((tool) => tool.name),\n        }));\n      }\n    },\n    [registerTools],\n  );\n  useEffect(() => {\n    if (userComponents) {\n      userComponents.forEach((component) => {\n        registerComponent(component, false);\n      });\n    }\n  }, [registerComponent, userComponents]);\n\n  useEffect(() => {\n    if (userTools) {\n      registerTools(userTools, false);\n    }\n  }, [registerTools, userTools]);\n\n  useEffect(() => {\n    if (!userMcpServers || userMcpServers.length === 0) {\n      setStaticMcpServerInfos([]);\n      return;\n    }\n\n    // Normalize servers from props and ensure all have serverKey and transport\n    const normalized = userMcpServers.map(normalizeServerInfo);\n    setStaticMcpServerInfos(normalized);\n  }, [userMcpServers]);\n\n  useEffect(() => {\n    // Validate that listResources and getResource are both provided or both omitted\n    validateResourceSource(userListResources, userGetResource);\n\n    // Set static resources from props\n    if (userResources) {\n      userResources.forEach((resource) => validateResource(resource));\n      setStaticResources(userResources);\n    } else {\n      setStaticResources([]);\n    }\n\n    // Set resource source from props\n    if (userListResources && userGetResource) {\n      setResourceSource({\n        listResources: userListResources,\n        getResource: userGetResource,\n      });\n    } else {\n      setResourceSource(null);\n    }\n  }, [userResources, userListResources, userGetResource]);\n\n  const registerResource = useCallback((resource: ListResourceItem) => {\n    validateResource(resource);\n    setStaticResources((prev) => [...prev, resource]);\n  }, []);\n\n  const registerResources = useCallback((resources: ListResourceItem[]) => {\n    resources.forEach((resource) => validateResource(resource));\n    setStaticResources((prev) => [...prev, ...resources]);\n  }, []);\n\n  const registerResourceSource = useCallback((source: ResourceSource) => {\n    validateResourceSource(source.listResources, source.getResource);\n    setResourceSource(source);\n  }, []);\n\n  const mcpServerInfos: NormalizedMcpServerInfo[] = useMemo(() => {\n    const allServers = [...staticMcpServerInfos, ...dynamicMcpServerInfos];\n    return deduplicateMcpServers(allServers);\n  }, [staticMcpServerInfos, dynamicMcpServerInfos]);\n\n  const value = {\n    componentList,\n    toolRegistry,\n    componentToolAssociations,\n    mcpServerInfos,\n    resources: staticResources,\n    resourceSource,\n    registerComponent,\n    registerTool,\n    registerTools,\n    addToolAssociation,\n    registerMcpServer,\n    registerMcpServers,\n    registerResource,\n    registerResources,\n    registerResourceSource,\n    onCallUnregisteredTool,\n  };\n\n  return (\n    <TamboRegistryContext.Provider value={value}>\n      {children}\n    </TamboRegistryContext.Provider>\n  );\n};\n\n/**\n * The useTamboRegistry hook provides access to the component registry\n * to the descendants of the TamboRegistryProvider.\n * @returns The component registry\n */\nexport const useTamboRegistry = () => {\n  return useContext(TamboRegistryContext);\n};\n\n/**\n * Hook to access the MCP server metadata from TamboRegistryProvider.\n * This provides access to the registered MCP server configurations (metadata only, not connections).\n *\n * This hook can be used anywhere within the TamboProvider hierarchy to access\n * the list of configured MCP servers without needing to be inside TamboMcpProvider.\n * @returns Array of MCP server metadata\n * @example\n * ```tsx\n * function MyComponent() {\n *   const mcpServers = useTamboMcpServerInfos();\n *\n *   return (\n *     <div>\n *       <h3>Configured MCP Servers:</h3>\n *       {mcpServers.map((server) => (\n *         <div key={server.url}>\n *           {server.name || server.url}\n *         </div>\n *       ))}\n *     </div>\n *   );\n * }\n * ```\n *\n * The returned objects are `NormalizedMcpServerInfo` instances, meaning both\n * `serverKey` and `transport` are always populated (with `transport`\n * defaulting to HTTP when not explicitly specified).\n */\nexport const useTamboMcpServerInfos = (): NormalizedMcpServerInfo[] => {\n  return useContext(TamboRegistryContext).mcpServerInfos;\n};\n"]}
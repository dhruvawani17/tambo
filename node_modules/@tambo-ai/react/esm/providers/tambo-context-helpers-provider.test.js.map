{"version":3,"file":"tambo-context-helpers-provider.test.js","sourceRoot":"","sources":["../../src/providers/tambo-context-helpers-provider.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { act, renderHook } from \"@testing-library/react\";\nimport React from \"react\";\nimport {\n  currentPageContextHelper,\n  currentTimeContextHelper,\n} from \"../context-helpers\";\nimport {\n  TamboContextHelpersProvider,\n  useTamboContextHelpers,\n} from \"./tambo-context-helpers-provider\";\n\n/**\n * Test suite for TamboContextHelpersProvider (simplified API, registry-backed)\n *\n * The simplified API:\n * - Accepts a plain map of { key: () => any | null | undefined | Promise<any | null | undefined> }.\n * - The key becomes the context name sent to the model.\n * - Returning null/undefined from a helper skips inclusion.\n * - Prebuilt helpers are just functions (e.g., prebuiltUserTime, prebuiltUserPage).\n *\n * The hook is now registry-backed and safe to call outside a provider. When used\n * outside a provider, it proxies to a global registry and still works.\n */\ndescribe(\"TamboContextHelpersProvider\", () => {\n  // Ensure registry is clean for each test to avoid cross-test contamination\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  // Base wrapper with no helpers provided\n  const wrapper = ({ children }: { children: React.ReactNode }) => (\n    <TamboContextHelpersProvider>{children}</TamboContextHelpersProvider>\n  );\n\n  describe(\"useTamboContextHelpers\", () => {\n    /**\n     * Verifies that the hook returns the expected API functions when used within a provider.\n     */\n    it(\"should provide context helpers functions (inside provider)\", () => {\n      const { result } = renderHook(() => useTamboContextHelpers(), {\n        wrapper,\n      });\n      expect(result.current).toHaveProperty(\"getAdditionalContext\");\n      expect(result.current).toHaveProperty(\"getContextHelpers\");\n      expect(result.current).toHaveProperty(\"addContextHelper\");\n      expect(result.current).toHaveProperty(\"removeContextHelper\");\n    });\n\n    /**\n     * With no helpers provided, no additional context should be returned.\n     */\n    it(\"should return no additional context when no helpers are provided\", async () => {\n      const { result } = renderHook(() => useTamboContextHelpers(), {\n        wrapper,\n      });\n      const contexts = await result.current.getAdditionalContext();\n      expect(contexts).toHaveLength(0);\n    });\n\n    /**\n     * When helpers are provided, getAdditionalContext should aggregate them.\n     * Note: prebuiltUserPage may be null in non-browser envs, so we only assert userTime when present.\n     */\n    it(\"should get additional context when helpers are provided\", async () => {\n      const withHelpers = ({ children }: { children: React.ReactNode }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            userTime: currentTimeContextHelper,\n            userPage: currentPageContextHelper,\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      );\n\n      const { result } = renderHook(() => useTamboContextHelpers(), {\n        wrapper: withHelpers,\n      });\n\n      const contexts = await result.current.getAdditionalContext();\n      const names = contexts.map((c) => c.name);\n\n      // userTime should be present from prebuilt helper\n      expect(names).toContain(\"userTime\");\n      // userPage may be absent on server; do not assert strictly\n    });\n\n    /**\n     * Errors thrown by helper functions should be caught and skipped, not crash the system.\n     */\n    it(\"should handle errors in context helper functions gracefully\", async () => {\n      const consoleErrorSpy = jest\n        .spyOn(console, \"error\")\n        .mockImplementation(() => {});\n\n      const badHelper = () => {\n        throw new Error(\"Test error\");\n      };\n\n      const withBadHelper = ({ children }: { children: React.ReactNode }) => (\n        <TamboContextHelpersProvider contextHelpers={{ badHelper }}>\n          {children}\n        </TamboContextHelpersProvider>\n      );\n\n      const { result } = renderHook(() => useTamboContextHelpers(), {\n        wrapper: withBadHelper,\n      });\n\n      const contexts = await result.current.getAdditionalContext();\n      expect(contexts.length).toBe(0);\n      expect(consoleErrorSpy).toHaveBeenCalledWith(\n        expect.stringContaining(\"Error running context helper badHelper\"),\n        expect.any(Error),\n      );\n      consoleErrorSpy.mockRestore();\n    });\n  });\n});\n\n/**\n * Test suite for Custom Context Helpers using the simplified API.\n *\n * Focuses on:\n * - Passing custom helpers via the provider prop.\n * - Overriding prebuilt helpers with custom implementations.\n * - Dynamic add/remove helper management at runtime.\n * - Supporting both sync and async helpers.\n * - Using the config key as the context name.\n * - Graceful error handling for custom helpers.\n */\ndescribe(\"Custom Context Helpers via contextHelpers config\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  /**\n   * Custom helpers can be added through the provider configuration.\n   * The key becomes the context name and the function returns the raw value.\n   */\n  it(\"should accept custom helpers through contextHelpers config\", async () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            customData: async () => ({ custom: \"value\" }),\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    const contexts = await result.current.getAdditionalContext();\n    expect(contexts).toContainEqual({\n      name: \"customData\",\n      context: { custom: \"value\" },\n    });\n  });\n\n  /**\n   * Built-in helpers can be overridden by providing a function under the same key.\n   */\n  it(\"should allow custom helpers to override built-in ones\", async () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            userTime: async () => ({ customTime: \"override\" }),\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    const contexts = await result.current.getAdditionalContext();\n    const userTimeContext = contexts.find((c) => c.name === \"userTime\");\n    expect(userTimeContext?.context).toEqual({ customTime: \"override\" });\n  });\n\n  /**\n   * Helpers can be added dynamically at runtime via addContextHelper.\n   */\n  it(\"should handle dynamic addition of custom helpers\", async () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider contextHelpers={{}}>\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    // Initially none\n    expect(await result.current.getAdditionalContext()).toHaveLength(0);\n\n    act(() => {\n      result.current.addContextHelper(\"dynamicHelper\", async () => ({\n        dynamic: true,\n      }));\n    });\n\n    const contexts = await result.current.getAdditionalContext();\n    expect(contexts).toContainEqual({\n      name: \"dynamicHelper\",\n      context: { dynamic: true },\n    });\n  });\n\n  /**\n   * Helpers can be removed dynamically via removeContextHelper.\n   */\n  it(\"should handle dynamic removal of context helpers\", async () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            customHelper: async () => ({ test: \"data\" }),\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    // Verify exists\n    let contexts = await result.current.getAdditionalContext();\n    expect(contexts.find((c) => c.name === \"customHelper\")).toBeDefined();\n\n    // Remove\n    act(() => {\n      result.current.removeContextHelper(\"customHelper\");\n    });\n\n    // Verify removed\n    contexts = await result.current.getAdditionalContext();\n    expect(contexts.find((c) => c.name === \"customHelper\")).toBeUndefined();\n  });\n\n  /**\n   * Multiple custom helpers should be supported; helpers returning null/undefined are skipped.\n   */\n  it(\"should handle multiple custom helpers\", async () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            helper1: async () => ({ data: \"one\" }),\n            helper2: async () => ({ data: \"two\" }),\n            helper3: () => null, // disabled by returning null\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    const contexts = await result.current.getAdditionalContext();\n    expect(contexts).toContainEqual({\n      name: \"helper1\",\n      context: { data: \"one\" },\n    });\n    expect(contexts).toContainEqual({\n      name: \"helper2\",\n      context: { data: \"two\" },\n    });\n    expect(contexts.find((c) => c.name === \"helper3\")).toBeUndefined();\n  });\n\n  /**\n   * Both synchronous and asynchronous helpers should be supported.\n   */\n  it(\"should handle sync and async custom helpers\", async () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            syncHelper: () => ({ sync: true }),\n            asyncHelper: async () => {\n              await new Promise((resolve) => setTimeout(resolve, 10));\n              return { async: true };\n            },\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    const contexts = await result.current.getAdditionalContext();\n    expect(contexts).toContainEqual({\n      name: \"syncHelper\",\n      context: { sync: true },\n    });\n    expect(contexts).toContainEqual({\n      name: \"asyncHelper\",\n      context: { async: true },\n    });\n  });\n\n  /**\n   * The key used in the contextHelpers map becomes the context name.\n   */\n  it(\"should use key name as context name for custom helpers\", async () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            myCustomKey: async () => ({ value: \"test\" }),\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    const contexts = await result.current.getAdditionalContext();\n    expect(contexts).toContainEqual({\n      name: \"myCustomKey\",\n      context: { value: \"test\" },\n    });\n  });\n\n  /**\n   * Errors thrown by custom helpers should be logged and skipped, not crash the system.\n   */\n  it(\"should handle errors in custom helpers gracefully\", async () => {\n    const consoleErrorSpy = jest\n      .spyOn(console, \"error\")\n      .mockImplementation(() => {});\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            errorHelper: async () => {\n              throw new Error(\"Custom helper error\");\n            },\n            goodHelper: async () => ({ good: \"data\" }),\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    const contexts = await result.current.getAdditionalContext();\n    expect(contexts).toContainEqual({\n      name: \"goodHelper\",\n      context: { good: \"data\" },\n    });\n    expect(contexts.find((c) => c.name === \"errorHelper\")).toBeUndefined();\n    expect(consoleErrorSpy).toHaveBeenCalledWith(\n      expect.stringContaining(\"Error running context helper errorHelper\"),\n      expect.any(Error),\n    );\n    consoleErrorSpy.mockRestore();\n  });\n\n  /**\n   * Removing non-existent helpers should be a no-op without throwing errors.\n   */\n  it(\"should handle removing non-existent helper gracefully\", () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider contextHelpers={{}}>\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    expect(() => {\n      act(() => {\n        result.current.removeContextHelper(\"nonExistent\");\n      });\n    }).not.toThrow();\n  });\n\n  /**\n   * Adding with an existing name should update/replace the helper implementation.\n   */\n  it(\"should allow updating existing helper via addContextHelper\", async () => {\n    const { result } = renderHook(() => useTamboContextHelpers(), {\n      wrapper: ({ children }) => (\n        <TamboContextHelpersProvider\n          contextHelpers={{\n            testHelper: async () => ({ original: true }),\n          }}\n        >\n          {children}\n        </TamboContextHelpersProvider>\n      ),\n    });\n\n    // Verify original helper\n    let contexts = await result.current.getAdditionalContext();\n    expect(contexts).toContainEqual({\n      name: \"testHelper\",\n      context: { original: true },\n    });\n\n    // Update the helper\n    act(() => {\n      result.current.addContextHelper(\"testHelper\", async () => ({\n        updated: true,\n      }));\n    });\n\n    // Verify updated helper\n    contexts = await result.current.getAdditionalContext();\n    expect(contexts).toContainEqual({\n      name: \"testHelper\",\n      context: { updated: true },\n    });\n  });\n});\n"]}
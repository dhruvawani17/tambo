{"version":3,"file":"tambo-provider.js","sourceRoot":"","sources":["../../src/providers/tambo-provider.tsx"],"names":[],"mappings":"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","sourcesContent":["\"use client\";\nimport React, { PropsWithChildren, createContext, useContext } from \"react\";\nimport { TamboMcpProvider } from \"../mcp/tambo-mcp-provider\";\nimport { TamboInteractableContext } from \"../model/tambo-interactable\";\nimport {\n  TamboClientContext,\n  TamboClientContextProps,\n  TamboClientProvider,\n  TamboClientProviderProps,\n} from \"./tambo-client-provider\";\nimport {\n  TamboComponentContextProps,\n  TamboComponentProvider,\n  useTamboComponent,\n} from \"./tambo-component-provider\";\nimport {\n  ContextAttachmentState,\n  TamboContextAttachmentProvider,\n  useTamboContextAttachment,\n} from \"./tambo-context-attachment-provider\";\nimport {\n  TamboContextHelpersContextProps,\n  TamboContextHelpersProvider,\n  TamboContextHelpersProviderProps,\n  useTamboContextHelpers,\n} from \"./tambo-context-helpers-provider\";\nimport {\n  TamboInteractableProvider,\n  useTamboInteractable,\n} from \"./tambo-interactable-provider\";\nimport { TamboMcpTokenProvider } from \"./tambo-mcp-token-provider\";\nimport {\n  TamboRegistryProvider,\n  TamboRegistryProviderProps,\n} from \"./tambo-registry-provider\";\nimport { TamboThreadInputProvider } from \"./tambo-thread-input-provider\";\nimport {\n  TamboGenerationStageContextProps,\n  TamboThreadContextProps,\n  TamboThreadProvider,\n  TamboThreadProviderProps,\n  useTamboThread,\n} from \"./tambo-thread-provider\";\n\n/**\n * The TamboProvider gives full access to the whole Tambo API. This includes the\n * TamboAI client, the component registry, the current thread context, and interactable components.\n * @param props - The props for the TamboProvider\n * @param props.children - The children to wrap\n * @param props.tamboUrl - The URL of the Tambo API\n * @param props.apiKey - The API key for the Tambo API\n * @param props.components - The components to register\n * @param props.environment - The environment to use for the Tambo API\n * @param props.tools - The tools to register\n * @param props.mcpServers - The MCP servers to register (metadata only - use TamboMcpProvider for connections)\n * @param props.streaming - Whether to stream the response by default. Defaults to true.\n * @param props.autoGenerateThreadName - Whether to automatically generate thread names. Defaults to true.\n * @param props.autoGenerateNameThreshold - The message count threshold at which the thread name will be auto-generated. Defaults to 3.\n * @param props.contextHelpers - Configuration for which context helpers are enabled/disabled\n * @param props.userToken - The user's OAuth token (access or ID) used to identify the user and exchange for a Tambo session token\n * @param props.contextKey - Optional context key passed to thread input provider for scoping threads\n * @param props.onCallUnregisteredTool - Callback function called when an unregistered tool is called\n * @param props.initialMessages - Initial messages to be included in new threads\n * @param props.getResource - Optional getResource function for registry resources\n * @param props.listResources - Optional listResources function for registry resources\n * @param props.resources - Optional static resources for the registry\n * @returns The TamboProvider component\n */\nexport const TamboProvider: React.FC<\n  PropsWithChildren<\n    TamboClientProviderProps &\n      TamboRegistryProviderProps &\n      TamboThreadProviderProps &\n      TamboContextHelpersProviderProps\n  >\n> = ({\n  children,\n  tamboUrl,\n  apiKey,\n  userToken,\n  components,\n  environment,\n  tools,\n  mcpServers,\n  streaming,\n  autoGenerateThreadName,\n  autoGenerateNameThreshold,\n  contextHelpers,\n  contextKey,\n  initialMessages,\n  onCallUnregisteredTool,\n  getResource,\n  listResources,\n  resources,\n}) => {\n  return (\n    <TamboClientProvider\n      tamboUrl={tamboUrl}\n      apiKey={apiKey}\n      environment={environment}\n      userToken={userToken}\n    >\n      <TamboRegistryProvider\n        components={components}\n        tools={tools}\n        mcpServers={mcpServers}\n        onCallUnregisteredTool={onCallUnregisteredTool}\n        getResource={getResource}\n        listResources={listResources}\n        resources={resources}\n      >\n        <TamboContextHelpersProvider contextHelpers={contextHelpers}>\n          <TamboThreadProvider\n            contextKey={contextKey}\n            streaming={streaming}\n            autoGenerateThreadName={autoGenerateThreadName}\n            autoGenerateNameThreshold={autoGenerateNameThreshold}\n            initialMessages={initialMessages}\n          >\n            <TamboMcpTokenProvider>\n              <TamboMcpProvider contextKey={contextKey}>\n                <TamboContextAttachmentProvider>\n                  <TamboComponentProvider>\n                    <TamboInteractableProvider>\n                      <TamboThreadInputProvider>\n                        <TamboCompositeProvider>\n                          {children}\n                        </TamboCompositeProvider>\n                      </TamboThreadInputProvider>\n                    </TamboInteractableProvider>\n                  </TamboComponentProvider>\n                </TamboContextAttachmentProvider>\n              </TamboMcpProvider>\n            </TamboMcpTokenProvider>\n          </TamboThreadProvider>\n        </TamboContextHelpersProvider>\n      </TamboRegistryProvider>\n    </TamboClientProvider>\n  );\n};\n\nexport type TamboContextProps = TamboClientContextProps &\n  TamboThreadContextProps &\n  TamboGenerationStageContextProps &\n  TamboComponentContextProps &\n  TamboInteractableContext &\n  TamboContextHelpersContextProps &\n  ContextAttachmentState;\n\nexport const TamboContext = createContext<TamboContextProps>(\n  {} as TamboContextProps,\n);\n\n/**\n * TamboCompositeProvider is a provider that combines the TamboClient,\n * TamboThread, TamboComponent, and TamboInteractable providers\n * @param props - The props for the TamboCompositeProvider\n * @param props.children - The children to wrap\n * @returns The wrapped component\n */\nexport const TamboCompositeProvider: React.FC<PropsWithChildren> = ({\n  children,\n}) => {\n  const threads = useTamboThread();\n  const clientContext = useContext(TamboClientContext);\n  if (!clientContext) {\n    throw new Error(\n      \"TamboCompositeProvider must be used within a TamboClientProvider\",\n    );\n  }\n  const { client, queryClient, isUpdatingToken } = clientContext;\n  const componentRegistry = useTamboComponent();\n  const interactableComponents = useTamboInteractable();\n  const contextHelpers = useTamboContextHelpers();\n  const contextAttachment = useTamboContextAttachment();\n\n  return (\n    <TamboContext.Provider\n      value={{\n        client,\n        queryClient,\n        isUpdatingToken,\n        ...componentRegistry,\n        ...threads,\n        ...interactableComponents,\n        ...contextHelpers,\n        ...contextAttachment,\n      }}\n    >\n      {children}\n    </TamboContext.Provider>\n  );\n};\n\n/**\n * The useTambo hook provides access to the Tambo API. This is the primary entrypoint\n * for the Tambo React SDK.\n *\n * This includes the TamboAI client, the component registry, the current thread context,\n * and interactable component management.\n * @returns The Tambo API\n */\nexport const useTambo = () => {\n  return useContext(TamboContext);\n};\n"]}
{"version":3,"file":"tambo-stubs.test.js","sourceRoot":"","sources":["../../src/providers/tambo-stubs.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { renderHook } from \"@testing-library/react\";\nimport React, { act } from \"react\";\nimport { useTamboThreadList } from \"../hooks/use-tambo-threads\";\nimport { TamboThread } from \"../model/tambo-thread\";\nimport { TamboStubProvider } from \"./tambo-stubs\";\n\ndescribe(\"TamboStubProvider threads functionality\", () => {\n  const mockThread: TamboThread = {\n    id: \"test-thread\",\n    messages: [],\n    createdAt: \"2024-01-01T00:00:00Z\",\n    projectId: \"test-project\",\n    updatedAt: \"2024-01-01T00:00:00Z\",\n    metadata: {},\n  };\n\n  const mockThreadsData: Partial<TamboAI.Beta.Threads.ThreadsOffsetAndLimit> = {\n    items: [mockThread],\n    total: 1,\n    count: 1,\n    getPaginatedItems: () => [mockThread],\n    nextPageRequestOptions: () => ({\n      offset: 1,\n      limit: 10,\n      path: \"/threads\",\n      method: \"get\",\n    }),\n  };\n\n  it(\"should populate query cache with threads data\", async () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboStubProvider\n        thread={mockThread}\n        threads={mockThreadsData}\n        projectId=\"test-project\"\n        components={[]}\n        tools={[]}\n      >\n        {children}\n      </TamboStubProvider>\n    );\n\n    const { result } = renderHook(() => useTamboThreadList(), { wrapper });\n    // Wait for the effect to run\n    await act(async () => {\n      await new Promise((resolve) => setTimeout(resolve, 0));\n    });\n\n    // The hook should return the pre-populated threads data\n    expect(result.current.data).toEqual(mockThreadsData);\n    expect(result.current.isLoading).toBe(false);\n  });\n\n  it(\"should populate query cache with threads data using contextKey\", async () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboStubProvider\n        thread={mockThread}\n        threads={mockThreadsData}\n        projectId=\"test-project\"\n        contextKey=\"test-context\"\n        components={[]}\n        tools={[]}\n      >\n        {children}\n      </TamboStubProvider>\n    );\n\n    const { result } = renderHook(() => useTamboThreadList(), { wrapper });\n    // Wait for the effect to run\n    await act(async () => {\n      await new Promise((resolve) => setTimeout(resolve, 0));\n    });\n\n    // The hook should return the pre-populated threads data for the specific context\n    expect(result.current.data).toEqual(mockThreadsData);\n    expect(result.current.isLoading).toBe(false);\n  });\n\n  it(\"should default projectId to thread.projectId when not provided\", async () => {\n    const wrapper = ({ children }: { children: React.ReactNode }) => (\n      <TamboStubProvider\n        thread={mockThread}\n        threads={mockThreadsData}\n        // No explicit projectId provided - should use thread.projectId\n        components={[]}\n        tools={[]}\n      >\n        {children}\n      </TamboStubProvider>\n    );\n\n    const { result } = renderHook(() => useTamboThreadList(), { wrapper });\n    // Wait for the effect to run\n    await act(async () => {\n      await new Promise((resolve) => setTimeout(resolve, 0));\n    });\n\n    // The hook should return the pre-populated threads data using thread.projectId\n    expect(result.current.data).toEqual(mockThreadsData);\n    expect(result.current.isLoading).toBe(false);\n  });\n});\n"]}
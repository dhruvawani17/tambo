import React from "react";
import { render, screen } from "@testing-library/react";
import { useV1ComponentContent, V1ComponentContentProvider, } from "./component-renderer";
// Test component that uses the content context
const ContextAwareComponent = () => {
    const context = useV1ComponentContent();
    return (React.createElement("div", { "data-testid": "context-aware" },
        React.createElement("span", { "data-testid": "componentId" }, context.componentId),
        React.createElement("span", { "data-testid": "threadId" }, context.threadId),
        React.createElement("span", { "data-testid": "messageId" }, context.messageId),
        React.createElement("span", { "data-testid": "componentName" }, context.componentName)));
};
describe("V1ComponentContentProvider", () => {
    it("provides context to child components", () => {
        render(React.createElement(V1ComponentContentProvider, { componentId: "comp_123", threadId: "thread_456", messageId: "msg_789", componentName: "TestComponent" },
            React.createElement(ContextAwareComponent, null)));
        expect(screen.getByTestId("componentId")).toHaveTextContent("comp_123");
        expect(screen.getByTestId("threadId")).toHaveTextContent("thread_456");
        expect(screen.getByTestId("messageId")).toHaveTextContent("msg_789");
        expect(screen.getByTestId("componentName")).toHaveTextContent("TestComponent");
    });
});
describe("useV1ComponentContent", () => {
    it("throws when used outside provider", () => {
        function TestConsumer() {
            useV1ComponentContent();
            return React.createElement("div", null, "Should not render");
        }
        // Suppress React error boundary logs
        const consoleSpy = jest.spyOn(console, "error").mockImplementation();
        expect(() => render(React.createElement(TestConsumer, null))).toThrow("useV1ComponentContent must be used within a rendered component");
        consoleSpy.mockRestore();
    });
    it("returns context when used within provider", () => {
        render(React.createElement(V1ComponentContentProvider, { componentId: "comp_test", threadId: "thread_test", messageId: "msg_test", componentName: "TestComp" },
            React.createElement(ContextAwareComponent, null)));
        expect(screen.getByTestId("componentId")).toHaveTextContent("comp_test");
    });
});
//# sourceMappingURL=component-renderer.test.js.map
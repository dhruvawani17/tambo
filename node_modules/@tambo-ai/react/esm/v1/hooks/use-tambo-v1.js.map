{"version":3,"file":"use-tambo-v1.js","sourceRoot":"","sources":["../../../src/v1/hooks/use-tambo-v1.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;AAEb;;;;;GAKG;AAEH,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,OAAO,CAAC;AAE5C,OAAO,EAAE,cAAc,EAAE,MAAM,uCAAuC,CAAC;AACvE,OAAO,EACL,oBAAoB,GAErB,MAAM,yCAAyC,CAAC;AACjD,OAAO,EACL,cAAc,EACd,iBAAiB,EACjB,mBAAmB,GAEpB,MAAM,sCAAsC,CAAC;AA+F9C;;;;;;;;;;;;;;;;;;;;;;;;;GAyBG;AACH,MAAM,UAAU,UAAU,CAAC,QAAiB;IAC1C,MAAM,MAAM,GAAG,cAAc,EAAE,CAAC;IAChC,MAAM,WAAW,GAAG,cAAc,EAAE,CAAC;IACrC,MAAM,QAAQ,GAAG,iBAAiB,EAAE,CAAC;IACrC,MAAM,QAAQ,GAAG,UAAU,CAAC,oBAAoB,CAAC,CAAC;IAClD,MAAM,gBAAgB,GAAG,mBAAmB,EAAE,CAAC;IAE/C,+EAA+E;IAC/E,MAAM,iBAAiB,GAAG,QAAQ,IAAI,WAAW,CAAC,eAAe,CAAC;IAClE,MAAM,WAAW,GAAG,iBAAiB;QACnC,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC;QAC1C,CAAC,CAAC,SAAS,CAAC;IAEd,8DAA8D;IAC9D,OAAO,OAAO,CAAC,GAAG,EAAE;QAClB,MAAM,MAAM,GAAG,WAAW,CAAC;QAC3B,MAAM,QAAQ,GAAG,MAAM,EAAE,MAAM,CAAC,QAAQ,IAAI,EAAE,CAAC;QAC/C,MAAM,cAAc,GAAmB,MAAM,EAAE,SAAS,IAAI;YAC1D,MAAM,EAAE,MAAe;SACxB,CAAC;QAEF,OAAO;YACL,MAAM;YACN,MAAM;YACN,QAAQ;YACR,cAAc;YACd,WAAW,EAAE,cAAc,CAAC,MAAM,KAAK,WAAW;YAClD,SAAS,EAAE,cAAc,CAAC,MAAM,KAAK,SAAS;YAC9C,MAAM,EAAE,cAAc,CAAC,MAAM,KAAK,MAAM;YACxC,iBAAiB,EAAE,QAAQ,CAAC,iBAAiB;YAC7C,YAAY,EAAE,QAAQ,CAAC,YAAY;YACnC,aAAa,EAAE,QAAQ,CAAC,aAAa;YACrC,aAAa,EAAE,QAAQ,CAAC,aAAa;YACrC,YAAY,EAAE,QAAQ,CAAC,YAAY;YACnC,eAAe,EAAE,WAAW,CAAC,eAAe;YAC5C,UAAU,EAAE,gBAAgB,CAAC,UAAU;YACvC,YAAY,EAAE,gBAAgB,CAAC,YAAY;YAC3C,cAAc,EAAE,gBAAgB,CAAC,cAAc;YAC/C,QAAQ;SACT,CAAC;IACJ,CAAC,EAAE;QACD,MAAM;QACN,WAAW;QACX,QAAQ;QACR,WAAW,CAAC,eAAe;QAC3B,gBAAgB;QAChB,QAAQ;KACT,CAAC,CAAC;AACL,CAAC","sourcesContent":["\"use client\";\n\n/**\n * useTamboV1 - Main Hook for v1 API\n *\n * Combines all v1 contexts into a single hook for convenient access\n * to thread state, streaming status, registry, and client.\n */\n\nimport { useContext, useMemo } from \"react\";\nimport type TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { useTamboClient } from \"../../providers/tambo-client-provider\";\nimport {\n  TamboRegistryContext,\n  type TamboRegistryContext as TamboRegistryContextType,\n} from \"../../providers/tambo-registry-provider\";\nimport {\n  useStreamState,\n  useStreamDispatch,\n  useThreadManagement,\n  type ThreadManagement,\n} from \"../providers/tambo-v1-stream-context\";\nimport type { StreamingState } from \"../types/thread\";\nimport type { TamboV1Message } from \"../types/message\";\nimport type { ThreadState } from \"../utils/event-accumulator\";\n\n/**\n * Return type for useTamboV1 hook\n */\nexport interface UseTamboV1Return {\n  /**\n   * The Tambo API client instance\n   */\n  client: TamboAI;\n\n  /**\n   * Current thread state for the given threadId, or undefined if not loaded\n   */\n  thread: ThreadState | undefined;\n\n  /**\n   * Messages in the current thread\n   */\n  messages: TamboV1Message[];\n\n  /**\n   * Current streaming state\n   */\n  streamingState: StreamingState;\n\n  /**\n   * Whether the thread is currently streaming a response\n   */\n  isStreaming: boolean;\n\n  /**\n   * Whether the thread is waiting for the AI to start responding\n   */\n  isWaiting: boolean;\n\n  /**\n   * Whether the thread is idle (not streaming or waiting)\n   */\n  isIdle: boolean;\n\n  /**\n   * Register a component with the registry\n   */\n  registerComponent: TamboRegistryContextType[\"registerComponent\"];\n\n  /**\n   * Register a tool with the registry\n   */\n  registerTool: TamboRegistryContextType[\"registerTool\"];\n\n  /**\n   * Register multiple tools with the registry\n   */\n  registerTools: TamboRegistryContextType[\"registerTools\"];\n\n  /**\n   * The component registry (Map of name -> component definition)\n   */\n  componentList: TamboRegistryContextType[\"componentList\"];\n\n  /**\n   * The tool registry (Map of name -> tool definition)\n   */\n  toolRegistry: TamboRegistryContextType[\"toolRegistry\"];\n\n  /**\n   * Current thread ID (may be null if no thread is active)\n   */\n  currentThreadId: string | null;\n\n  /**\n   * Initialize a new thread in the stream context\n   */\n  initThread: ThreadManagement[\"initThread\"];\n\n  /**\n   * Switch the current active thread\n   */\n  switchThread: ThreadManagement[\"switchThread\"];\n\n  /**\n   * Start a new thread (generates a temporary ID)\n   */\n  startNewThread: ThreadManagement[\"startNewThread\"];\n\n  /**\n   * Dispatch function for stream events (advanced usage)\n   */\n  dispatch: ReturnType<typeof useStreamDispatch>;\n}\n\n/**\n * Main hook for accessing Tambo v1 functionality.\n *\n * Combines thread state, streaming status, registry, and client\n * into a single convenient hook.\n * @param threadId - Optional thread ID to get state for\n * @returns Combined v1 context with thread state and utilities\n * @example\n * ```tsx\n * function ChatInterface() {\n *   const {\n *     thread,\n *     messages,\n *     isStreaming,\n *     registerComponent,\n *   } = useTamboV1('thread_123');\n *\n *   return (\n *     <div>\n *       {messages.map(msg => <Message key={msg.id} message={msg} />)}\n *       {isStreaming && <LoadingIndicator />}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useTamboV1(threadId?: string): UseTamboV1Return {\n  const client = useTamboClient();\n  const streamState = useStreamState();\n  const dispatch = useStreamDispatch();\n  const registry = useContext(TamboRegistryContext);\n  const threadManagement = useThreadManagement();\n\n  // Get thread state for the given threadId (or current thread if not specified)\n  const effectiveThreadId = threadId ?? streamState.currentThreadId;\n  const threadState = effectiveThreadId\n    ? streamState.threadMap[effectiveThreadId]\n    : undefined;\n\n  // Memoize the return object to prevent unnecessary re-renders\n  return useMemo(() => {\n    const thread = threadState;\n    const messages = thread?.thread.messages ?? [];\n    const streamingState: StreamingState = thread?.streaming ?? {\n      status: \"idle\" as const,\n    };\n\n    return {\n      client,\n      thread,\n      messages,\n      streamingState,\n      isStreaming: streamingState.status === \"streaming\",\n      isWaiting: streamingState.status === \"waiting\",\n      isIdle: streamingState.status === \"idle\",\n      registerComponent: registry.registerComponent,\n      registerTool: registry.registerTool,\n      registerTools: registry.registerTools,\n      componentList: registry.componentList,\n      toolRegistry: registry.toolRegistry,\n      currentThreadId: streamState.currentThreadId,\n      initThread: threadManagement.initThread,\n      switchThread: threadManagement.switchThread,\n      startNewThread: threadManagement.startNewThread,\n      dispatch,\n    };\n  }, [\n    client,\n    threadState,\n    registry,\n    streamState.currentThreadId,\n    threadManagement,\n    dispatch,\n  ]);\n}\n"]}
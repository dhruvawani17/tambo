{"version":3,"file":"standard-schema.test.js","sourceRoot":"","sources":["../../src/schema/standard-schema.test.ts"],"names":[],"mappings":"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","sourcesContent":["import * as z3 from \"zod/v3\";\nimport * as z4 from \"zod/v4\";\nimport { isStandardSchema } from \"./standard-schema\";\n\ndescribe(\"isStandardSchema\", () => {\n  describe(\"returns true for valid Standard Schema implementations\", () => {\n    it(\"recognizes Zod 4 object schema\", () => {\n      const schema = z4.object({ name: z4.string() });\n      expect(isStandardSchema(schema)).toBe(true);\n    });\n\n    it(\"recognizes Zod 3 object schema\", () => {\n      const schema = z3.object({ name: z3.string() });\n      expect(isStandardSchema(schema)).toBe(true);\n    });\n\n    it(\"recognizes Zod 4 string schema\", () => {\n      const schema = z4.string();\n      expect(isStandardSchema(schema)).toBe(true);\n    });\n\n    it(\"recognizes Zod 3 string schema\", () => {\n      const schema = z3.string();\n      expect(isStandardSchema(schema)).toBe(true);\n    });\n\n    it(\"recognizes Zod 4 array schema\", () => {\n      const schema = z4.array(z4.number());\n      expect(isStandardSchema(schema)).toBe(true);\n    });\n\n    it(\"recognizes Zod 3 array schema\", () => {\n      const schema = z3.array(z3.number());\n      expect(isStandardSchema(schema)).toBe(true);\n    });\n\n    it(\"recognizes custom object implementing Standard Schema v1\", () => {\n      const customSchema = {\n        \"~standard\": {\n          version: 1,\n          vendor: \"custom\",\n          validate: () => ({ value: {} }),\n        },\n      };\n      expect(isStandardSchema(customSchema)).toBe(true);\n    });\n  });\n\n  describe(\"returns false for non-Standard Schema values\", () => {\n    it(\"rejects null\", () => {\n      expect(isStandardSchema(null)).toBe(false);\n    });\n\n    it(\"rejects undefined\", () => {\n      expect(isStandardSchema(undefined)).toBe(false);\n    });\n\n    it(\"rejects primitives\", () => {\n      expect(isStandardSchema(\"string\")).toBe(false);\n      expect(isStandardSchema(123)).toBe(false);\n      expect(isStandardSchema(true)).toBe(false);\n    });\n\n    it(\"rejects plain objects without ~standard\", () => {\n      expect(isStandardSchema({ foo: \"bar\" })).toBe(false);\n    });\n\n    it(\"rejects JSON Schema objects\", () => {\n      const jsonSchema = {\n        type: \"object\",\n        properties: { name: { type: \"string\" } },\n      };\n      expect(isStandardSchema(jsonSchema)).toBe(false);\n    });\n\n    it(\"rejects objects with ~standard that is not an object\", () => {\n      expect(isStandardSchema({ \"~standard\": \"invalid\" })).toBe(false);\n      expect(isStandardSchema({ \"~standard\": 123 })).toBe(false);\n      expect(isStandardSchema({ \"~standard\": true })).toBe(false);\n    });\n\n    it(\"rejects objects with ~standard that is null\", () => {\n      expect(isStandardSchema({ \"~standard\": null })).toBe(false);\n    });\n\n    it(\"rejects objects with wrong version\", () => {\n      const invalidVersion = {\n        \"~standard\": {\n          version: 2, // Wrong version\n          vendor: \"custom\",\n          validate: () => ({ value: {} }),\n        },\n      };\n      expect(isStandardSchema(invalidVersion)).toBe(false);\n    });\n\n    it(\"rejects objects with missing version\", () => {\n      const missingVersion = {\n        \"~standard\": {\n          vendor: \"custom\",\n          validate: () => ({ value: {} }),\n        },\n      };\n      expect(isStandardSchema(missingVersion)).toBe(false);\n    });\n\n    it(\"rejects objects with non-string vendor\", () => {\n      const invalidVendor = {\n        \"~standard\": {\n          version: 1,\n          vendor: 123, // Not a string\n          validate: () => ({ value: {} }),\n        },\n      };\n      expect(isStandardSchema(invalidVendor)).toBe(false);\n    });\n\n    it(\"rejects objects with missing vendor\", () => {\n      const missingVendor = {\n        \"~standard\": {\n          version: 1,\n          validate: () => ({ value: {} }),\n        },\n      };\n      expect(isStandardSchema(missingVendor)).toBe(false);\n    });\n\n    it(\"rejects objects with non-function validate\", () => {\n      const invalidValidate = {\n        \"~standard\": {\n          version: 1,\n          vendor: \"custom\",\n          validate: \"not-a-function\",\n        },\n      };\n      expect(isStandardSchema(invalidValidate)).toBe(false);\n    });\n\n    it(\"rejects objects with missing validate\", () => {\n      const missingValidate = {\n        \"~standard\": {\n          version: 1,\n          vendor: \"custom\",\n        },\n      };\n      expect(isStandardSchema(missingValidate)).toBe(false);\n    });\n  });\n});\n"]}
{"version":3,"file":"resource-validators.test.js","sourceRoot":"","sources":["../../src/util/resource-validators.test.ts"],"names":[],"mappings":"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","sourcesContent":["import type { ListResourceItem } from \"../model/resource-info\";\nimport {\n  validateResource,\n  validateResourceSource,\n} from \"./resource-validators\";\n\ndescribe(\"validateResourceSource\", () => {\n  it(\"should throw when has listResources but not getResource\", () => {\n    const listResources = async () => [];\n    const getResource = undefined;\n\n    expect(() => {\n      validateResourceSource(listResources, getResource);\n    }).toThrow(\n      \"Both listResources and getResource must be provided together, or neither should be provided. \" +\n        \"Got: listResources=defined, getResource=undefined\",\n    );\n  });\n\n  it(\"should throw when has getResource but not listResources\", () => {\n    const listResources = undefined;\n    const getResource = async () => ({\n      contents: [\n        {\n          uri: \"https://resource\",\n          mimeType: \"text/plain\",\n          text: \"test\",\n        },\n      ],\n    });\n\n    expect(() => {\n      validateResourceSource(listResources, getResource);\n    }).toThrow(\n      \"Both listResources and getResource must be provided together, or neither should be provided. \" +\n        \"Got: listResources=undefined, getResource=defined\",\n    );\n  });\n\n  it(\"should not throw when both listResources and getResource are provided\", () => {\n    const listResources = async () => [];\n    const getResource = async () => ({\n      contents: [\n        {\n          uri: \"https://resource\",\n          mimeType: \"text/plain\",\n          text: \"test\",\n        },\n      ],\n    });\n\n    expect(() => {\n      validateResourceSource(listResources, getResource);\n    }).not.toThrow();\n  });\n\n  it(\"should not throw when neither listResources nor getResource are provided\", () => {\n    const listResources = undefined;\n    const getResource = undefined;\n\n    expect(() => {\n      validateResourceSource(listResources, getResource);\n    }).not.toThrow();\n  });\n});\n\ndescribe(\"validateResource\", () => {\n  it(\"should throw when resource is missing uri field\", () => {\n    const resource = {\n      name: \"Test Resource\",\n    } as ListResourceItem;\n\n    expect(() => {\n      validateResource(resource);\n    }).toThrow(\"Resource must have a 'uri' field\");\n  });\n\n  it(\"should throw when resource is missing name field\", () => {\n    const resource = {\n      uri: \"https://resource\",\n    } as ListResourceItem;\n\n    expect(() => {\n      validateResource(resource);\n    }).toThrow(\"Resource with URI 'https://resource' must have a 'name' field\");\n  });\n\n  it(\"should not throw when resource has both uri and name fields\", () => {\n    const resource: ListResourceItem = {\n      uri: \"https://resource\",\n      name: \"Test Resource\",\n    };\n\n    expect(() => {\n      validateResource(resource);\n    }).not.toThrow();\n  });\n\n  it(\"should not throw when resource has uri, name, and optional fields\", () => {\n    const resource: ListResourceItem = {\n      uri: \"https://resource\",\n      name: \"Test Resource\",\n      description: \"A test resource\",\n      mimeType: \"text/plain\",\n    };\n\n    expect(() => {\n      validateResource(resource);\n    }).not.toThrow();\n  });\n});\n"]}